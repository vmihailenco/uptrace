(function(t){function e(e){for(var n,s,i=e[0],u=e[1],c=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var u=a[i];0!==r[u]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"05d5":function(t,e,a){},"10d3":function(t,e,a){},"11f0":function(t,e,a){"use strict";a("c29d")},"14f3":function(t,e,a){},1737:function(t,e,a){"use strict";a("b633")},1775:function(t,e,a){"use strict";a("14f3")},1932:function(t,e,a){"use strict";a("8c36")},"1cac":function(t,e,a){},"224b":function(t,e,a){},2784:function(t,e,a){},"29e2":function(t,e,a){"use strict";a("9d08")},"32f8":function(t,e,a){"use strict";a("57c4")},"4a99":function(t,e,a){"use strict";a("9242")},"4fbb":function(t,e,a){},"57c4":function(t,e,a){},"5a7a":function(t,e,a){"use strict";a("2784")},"5fb7":function(t,e,a){"use strict";a("786e")},"735d":function(t,e,a){"use strict";a("10d3")},"786e":function(t,e,a){},"868d":function(t,e,a){},8784:function(t,e,a){"use strict";a("05d5")},"87c2":function(t,e,a){"use strict";a("1cac")},"87c8":function(t,e,a){},"8c36":function(t,e,a){},9242:function(t,e,a){},"9d08":function(t,e,a){},"9e2f":function(t,e,a){"use strict";a("c61f")},a4e0:function(t,e,a){"use strict";a("868d")},b20f:function(t,e,a){},b633:function(t,e,a){},bff1:function(t,e,a){"use strict";a("87c8")},c05d:function(t,e,a){"use strict";a("224b")},c29d:function(t,e,a){},c61f:function(t,e,a){},c867:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("6005"),a("a01d"),a("46d2"),a("6463");var n=a("d04a"),r=a("4bf0"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",elevation:"1",color:"white"}},[a("v-container",{staticClass:"pa-0 fill-height",attrs:{fluid:t.$vuetify.breakpoint.lgAndDown}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"mt-2"},[t.$vuetify.breakpoint.lgAndUp?a("UptraceLogoLarge",{attrs:{to:{name:"Home"}}}):a("UptraceLogoSmall",{attrs:{to:{name:"Home"}}})],1)]),a("v-col",{attrs:{cols:"auto"}},[a("v-tabs",{staticClass:"ml-8",attrs:{optional:""}},[a("v-tab",{attrs:{to:{name:"Overview"}}},[t._v("Overview")]),a("v-tab",{attrs:{to:{name:"GroupList"}}},[t._v("Explore")]),a("v-tab",{attrs:{to:{name:"Help"}}},[t._v("Help")]),a("v-tab",{attrs:{href:"https://github.com/uptrace/uptrace/releases/latest",target:"_blank"}},[a("span",[t._v("Latest Release")]),a("v-icon",{attrs:{right:""}},[t._v("mdi-open-in-new")])],1)],1)],1),a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-text-field",{staticStyle:{"min-width":"300px",width:"300px"},attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Jump to trace id...","hide-details":"",flat:"",solo:"","background-color":"grey lighten-4"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.jumpToTrace.apply(null,arguments)}},model:{value:t.traceId,callback:function(e){t.traceId=e},expression:"traceId"}})],1),a("v-col",{staticClass:"d-none d-md-inline-block",attrs:{cols:"auto"}},[a("v-btn",{staticClass:"deep-orange darken-3 ml-lg-10",attrs:{href:"https://uptrace.dev/compare-open-source",target:"_blank",dark:""}},[t._v("Upgrade")])],1)],1)],1)],1),a("v-main",[a("XSnackbar"),a("router-view")],1)],1)},s=[],i=a("4956"),u=(a("a2c3"),a("7697"),a("b35d"),a("4967"),a("eef3"),a("e0f4"),a("9b3c"),a("7e15"),a("3b38"),a("1753"),a("c63a"),a("0297"),a("bcba"));function c(t,e){var a;function n(){if(void 0===a)try{a=e.apply(void 0,arguments)}catch(t){console.error(t)}return a}function r(){return n.apply(void 0,arguments)}function o(){return a}return r.inject=o,r}function l(){var t=Object(r["getCurrentInstance"])();if(!t)throw new Error("useRouter is called outside of setup");var e=t.proxy.$router,a=Object(r["computed"])((function(){return t.proxy.$route}));return{router:e,route:a}}var d=c("useQuery",(function(){var t,e=l(),a=e.router,n=e.route,o=Object(r["shallowRef"])(),s=Object(r["shallowRef"])([]),c=Object(r["shallowRef"])([]),d=Object(r["computed"])((function(){if(n.value.matched.length){var t,e={},a=Object(i["a"])(c.value);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.toQuery){var o=r.toQuery();o&&Object.assign(e,Object(u["cloneDeep"])(o))}}}catch(s){a.e(s)}finally{a.f()}return e}})),v=Object(u["debounce"])((function(e,n){if(void 0!==n){for(var r in n)if(void 0===n[r])return;t=Object(u["omit"])(e,"matched"),t.query=n,a.replace({query:n,hash:e.hash}).catch((function(){}))}}),10);function f(t){function e(){var e=c.value.findIndex((function(e){return e===t}));e>=0&&(c.value.splice(e,1),c.value=c.value)}return c.value.push(t),c.value=c.value,Object(r["onBeforeUnmount"])(e),t.fromQuery&&Object(r["onBeforeMount"])((function(){o.value&&t.fromQuery&&t.fromQuery(o.value.query)})),e}function b(t){s.value.push(t),s.value=s.value,Object(r["onBeforeUnmount"])((function(){var e=s.value.findIndex((function(e){return e===t}));e>=0&&(s.value.splice(e,1),s.value=s.value)})),Object(r["onBeforeMount"])((function(){o.value&&t(o.value)}))}return Object(r["watch"])(n,(function(e){if(e.matched.length&&(!t||!p(e,t))){var a,n=Object(i["a"])(c.value);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.fromQuery&&r.fromQuery(e.query)}}catch(v){n.e(v)}finally{n.f()}var u,l=Object(i["a"])(s.value);try{for(l.s();!(u=l.n()).done;){var d=u.value;d(e)}}catch(v){l.e(v)}finally{l.f()}o.value=e}}),{immediate:!0,flush:"sync"}),Object(r["watch"])(n,(function(e){e.matched.length&&(t&&p(e,t)||v(e,d.value))}),{flush:"post"}),Object(r["watch"])(d,(function(t,e){m(t,e)||v(n.value,t)}),{immediate:!0,flush:"post"}),{route:o,onRouteUpdated:b,sync:f}}));function p(t,e){return t.path===e.path&&v(t.params,e.params)&&m(t.query,e.query)}function v(t,e){return JSON.stringify(t,Object.keys(t).sort())===JSON.stringify(e,Object.keys(e).sort())}function m(t,e){var a=new URLSearchParams(t),n=new URLSearchParams(e);return a.toString()===n.toString()}var f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",t._g(t._b({staticClass:"d-inline-block"},"router-link",t.$attrs,!1),t.$listeners),[a("v-img",{staticClass:"shrink",attrs:{src:"/uptrace/logo-large.svg","max-width":"160",width:"160",alt:"Uptrace"}})],1)},b=[],h=a("bdd7"),g=a("5628"),y=a.n(g),x=a("83f7"),O={},_=Object(h["a"])(O,f,b,!1,null,null,null),j=_.exports;y()(_,{VImg:x["a"]});var C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",t._g(t._b({staticClass:"d-inline-block"},"router-link",t.$attrs,!1),t.$listeners),[a("v-img",{staticClass:"shrink",attrs:{src:"/uptrace/logo-small.svg","max-width":t.width,width:t.width,transition:"scale-transition",alt:"Uptrace"}})],1)},w=[],k=(a("8ec1"),Object(r["defineComponent"])({name:"UptraceLogoSmall",props:{width:{type:[Number,String],default:38}}})),S=k,V=Object(h["a"])(S,C,w,!1,null,null,null),q=V.exports;y()(V,{VImg:x["a"]});var P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{color:t.snackbar.color,timeout:t.snackbar.timeout,top:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[a("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.snackbar.active=!1}}},"v-btn",n,!1),[t._v("Close")])]}}]),model:{value:t.snackbar.active,callback:function(e){t.$set(t.snackbar,"active",e)},expression:"snackbar.active"}},[a("span",[t._v(t._s(t.snackbar.notification))])])},T=[],R=c("useSnackbar",(function(){var t=Object(r["ref"])(""),e=Object(r["ref"])(!1),a=Object(r["ref"])(""),n=Object(r["ref"])(-1);function o(t){i(t),a.value="success"}function s(t){i(I(t)),a.value="error"}function i(a){t.value=a,e.value=!0,n.value=1e4}return Object(r["proxyRefs"])({notification:t,active:e,color:a,timeout:n,notifySuccess:o,notifyError:s})}));function I(t){return"string"===typeof t?t:t.message}var E=Object(r["defineComponent"])({name:"XSnackbar",setup:function(){return{snackbar:R()}}}),D=E,L=a("cfac"),M=a("26fb"),N=Object(h["a"])(D,P,T,!1,null,"29f4304c",null),$=N.exports;y()(N,{VBtn:L["a"],VSnackbar:M["a"]});var B=Object(r["defineComponent"])({name:"App",components:{UptraceLogoLarge:j,UptraceLogoSmall:q,XSnackbar:$},setup:function(){var t=l(),e=t.router;d();var a=Object(r["shallowRef"])("");function n(){a.value&&(e.push({name:"TraceShow",params:{traceId:a.value}}),a.value="")}return{traceId:a,jumpToTrace:n}}}),A=B,F=(a("bff1"),a("3b39")),G=a("75df"),X=a("b72f"),H=a("8ad5"),U=a("2863"),Q=a("4955"),W=a("07df"),z=a("497f"),K=a("0905"),J=a("cde6"),Z=a("7e31"),Y=Object(h["a"])(A,o,s,!1,null,"4135be80",null),tt=Y.exports;y()(Y,{VApp:F["a"],VAppBar:G["a"],VBtn:L["a"],VCol:X["a"],VContainer:H["a"],VIcon:U["a"],VMain:Q["a"],VRow:W["a"],VSpacer:z["a"],VTab:K["a"],VTabs:J["a"],VTextField:Z["a"]});var et=a("dc3b"),at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",{scopedSlots:t._u([t.systems.hasNoData?{key:"placeholder",fn:function(){return[a("HelpCard",{attrs:{"date-range":t.dateRange,loading:t.systems.loading}})]},proxy:!0}:null],null,!0)},[a("div",[a("v-container",{staticClass:"pb-0",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-row",{staticClass:"mb-4",attrs:{align:"center"}},[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("DateRangePicker",{attrs:{"date-range":t.dateRange}})],1)],1)],1)],1),a("v-container",{staticClass:"pt-2",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-row",[a("v-col",[a("SystemOverview",{attrs:{"date-range":t.dateRange,systems:t.systems}})],1)],1)],1)],1)},nt=[],rt=a("2768"),ot=a("e97b"),st=a("e48e"),it=a("e636"),ut=(a("c19e"),a("c3c4"),a("239e")),ct=a("5529"),lt=a("7a4f"),dt=a("5e25"),pt=c("useForceReload",(function(){var t=Object(r["ref"])(0);function e(){t.value=Date.now()}var a=Object(r["computed"])((function(){return t.value?{_force:t.value}:{}}));return{forceReload:e,forceReloadParams:a}})),vt=(a("da4f"),a("3017")),mt=a("83af"),ft=(a("17ae"),a("687d"),a("82ba")),bt=a("98ee"),ht=1,gt=1e3*ht,yt=60*gt,xt=60*yt,Ot=24*xt;function _t(t){if(t instanceof Date)return t;if("number"===typeof t)return new Date(t);if("string"!==typeof t)return new Date(NaN);if(/^\d+$/.test(t))return new Date(parseInt(t,10)/1e6);var e=Date.parse(t);return new Date(e)}function jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LLL d y HH:mm";return wt(t,e)}function Ct(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LLL d y HH:mm:ss.SSS";return wt(t,e)}function wt(t,e){return t?("string"===typeof t&&(t=Object(vt["a"])(t)),Object(mt["a"])(t,e)):String(t)}var kt="yyyyMMdd'T'HHmmss";function St(t){return Object(mt["a"])(qt(t),kt)}function Vt(t){var e=Object(ft["a"])(t,kt,new Date);return Object(bt["a"])(e)?(e=Pt(e),e):new Date(t)}function qt(t){return Object(ct["a"])(t,t.getTimezoneOffset()*yt)}function Pt(t){return Object(ut["a"])(t,t.getTimezoneOffset()*yt)}function Tt(t,e){var a=t.getTime()%e;return 0===a?t:Object(ct["a"])(t,e-a)}function Rt(){var t,e=Object(r["ref"])(),a=Object(r["ref"])(!1),n=Object(r["ref"])(0),o=pt(),s=o.forceReload,i=o.forceReloadParams,u=Object(r["computed"])((function(){return Boolean(e.value)&&Boolean(n.value)})),c=Object(r["computed"])((function(){if(u.value){var t=Object(ut["a"])(e.value,n.value);return t}})),l=Object(r["computed"])({get:function(){return Pt(c.value).toISOString().substr(0,10)},set:function(t){var e=qt(new Date(t));x(e)}}),p=Object(r["computed"])({get:function(){var t=c.value;return"".concat(t.getHours(),":").concat(t.getMinutes())},set:function(t){var e=new Date(c.value.getTime()),a=t.split(":"),n=Object(it["a"])(a,2),r=n[0],o=n[1];e.setHours(parseInt(r,10)),e.setMinutes(parseInt(o,10)),x(e)}});function v(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n&&!a.value)return!1;a.value=!0;var r=Tt(new Date,yt);return!(r<=e.value)&&(e.value=r,t&&clearTimeout(t),t=setTimeout(v,5*yt),!0)}function m(){t&&(clearTimeout(t),t=null),a.value=!1}function f(){v(!0),s()}function b(){m(),e.value=void 0,n.value=0}function h(t,a){var r=a.getTime()-t.getTime();e.value&&e.value.getTime()===a.getTime()&&n.value===r||(m(),e.value=a,n.value=r)}function g(t){if(e.value&&!a.value){var r=Object(ct["a"])(c.value,t),o=new Date;if(r<o)return n.value=t,void(e.value=r)}n.value=t,v(!0)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"string"===typeof t&&(t=new Date(t)),e&&(n.value=e),t=Object(ct["a"])(t,n.value/2);var a=Tt(new Date,yt);t=Object(lt["a"])([t,a]),O(t)}function x(t){O(Object(ct["a"])(t,n.value))}function O(t){m(),e.value=t}var _=Object(r["computed"])((function(){if(!u.value)return!1;var t=Object(dt["a"])(new Date,c.value);return t<30*Ot}));function j(){m(),e.value=Object(ut["a"])(e.value,n.value)}var C=Object(r["computed"])((function(){if(!u.value||a.value)return!1;var t=Object(dt["a"])(new Date,e.value);return t>15*yt}));function w(){var t=Object(ct["a"])(e.value,n.value),a=new Date;O(t<=a?t:a)}function k(){var t;return u.value?a.value?Object(st["a"])({},"time_dur",n.value/gt):(t={},Object(st["a"])(t,"time_gte",St(c.value)),Object(st["a"])(t,"time_dur",n.value/gt),t):{}}function S(t){var e=t["time_dur"],a=t["time_gte"];e&&(n.value=parseInt(e,10)*gt,"string"===typeof a?x(Vt(a)):v(!0))}function V(){if(!u.value)return{time_gte:void 0,time_lt:void 0};var t=c.value,a=e.value,n=Object(ot["a"])(Object(ot["a"])({},i.value),{},{time_gte:t.toISOString(),time_lt:a.toISOString()});return n}function q(){d().sync({fromQuery:function(t){S(t)},toQuery:function(){return k()}})}return Object(r["proxyRefs"])({gte:c,lt:e,isValid:u,isNow:a,duration:n,datePicker:l,timePicker:p,updateNow:v,reload:f,forceReload:s,reset:b,change:h,changeDuration:g,changeWithin:y,changeGTE:x,changeLT:O,hasPrevPeriod:_,prevPeriod:j,hasNextPeriod:C,nextPeriod:w,queryParams:k,axiosParams:V,syncQuery:q})}a("582e"),a("60d1"),a("d4c6"),a("5a44"),a("edf1"),a("20ad"),a("9e06"),a("b05f");var It=a("4f14"),Et=a.n(It);function Dt(t){var e=R(),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["shallowRef"])(!1),s=0,i=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var r;return s++,function(e){o.value=!0,r=t.apply(void 0,a),r.then((function(t){o.value=!1,e===s&&u(t)}),(function(t){return o.value=!1,e===s&&c(t),t}))}(s),r},u=function(t){a.value=t,n.value=void 0},c=function(t){if(null!==t&&!Et.a.isCancel(t)){if(void 0===t)return a.value=void 0,void(n.value=void 0);a.value=void 0,n.value=t}},l=function(){s++},d=Object(r["computed"])((function(){var t,e;if(!n.value)return"";var a=null===(t=n.value.response)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message;return Lt(a||n.value)}));return Object(r["watch"])(n,(function(t){t&&d.value&&e.notifyError(d.value)})),{promised:i,result:a,error:n,pending:o,cancel:l}}function Lt(t){return"string"===typeof t?t:t.message}function Mt(){var t=null,e=Dt((function(e){return null===e?Promise.reject(null):Nt(e)?(e&&!e.cancelToken&&(t=Et.a.CancelToken.source(),e=Object(ot["a"])(Object(ot["a"])({},e),{},{cancelToken:t.token})),Et.a.request(e)):Promise.reject(void 0)})),a=e.pending,n=e.promised,o=e.result,s=e.error,i=e.cancel,u=Object(r["computed"])((function(){var t;return null===(t=o.value)||void 0===t?void 0:t.data}));function c(){i(),t&&(t.cancel(),t=null)}function l(t,e){return c(),e&&e.signal.addEventListener("abort",(function(){c()})),n(t)}return{loading:a,result:o,data:u,error:s,request:l,abort:c}}function Nt(t){return void 0!==t&&((!t.url||!t.url.includes("undefined"))&&((!("params"in t)||void 0!==t.params)&&(!(t.params&&!$t(t.params))&&((!("data"in t)||void 0!==t.data)&&!(t.data&&!$t(t.data))))))}function $t(t){for(var e in t)if(void 0===t[e])return!1;return!0}function Bt(t,e){var a,n,o="",s=function(t,r,o){a=new AbortController,e(t,n,o,a).catch((function(){})).finally((function(){a=void 0}))},i=function(t,e,a){c(),s(t,n,a),n=t,o=JSON.stringify(n)},u=i;function c(){a&&(a.abort(),a=void 0,n=void 0,o="")}function l(t){var e=function(){};if(t){if(a&&!d(t))return;return s(t,n,e)}if(n){if(a)return;return s(n,void 0,e)}}function d(t){return JSON.stringify(t)!==o}i=function(t,e,a){d(t)&&u(t,e,a)};var p=Object(r["watch"])(t,i,{immediate:!0});return Object(r["onBeforeUnmount"])(c),{abort:c,reload:l,stopWatch:p}}function At(t){var e=Mt(),a=e.loading,n=e.data,r=e.error,o=e.request,s=Bt(t,(function(t,e,a,n){return o(t,n)})),i=s.reload,u=s.abort;return{loading:a,data:n,error:r,abort:u,reload:i}}function Ft(t){var e=At((function(){return{url:"/api/tracing/systems",params:Object(ot["a"])({},t.axiosParams())}})),a=e.loading,n=e.data,o=Object(r["computed"])((function(){var t,e;return Gt(null!==(t=null===(e=n.value)||void 0===e?void 0:e.systems)&&void 0!==t?t:[])})),s=Object(r["computed"])((function(){return Xt(o.value)})),i=Object(r["computed"])((function(){var t;return!!Array.isArray(null===(t=n.value)||void 0===t?void 0:t.systems)&&0===n.value.systems.length})),u=Object(r["shallowRef"])(),c=Object(r["computed"])({get:function(){return u.value},set:function(t){u.value=t||void 0}}),l=Object(r["computed"])((function(){if(c.value){var t=o.value.find((function(t){return t.system===c.value}));return t}}));function d(){var t;return{system:null===(t=l.value)||void 0===t?void 0:t.system}}function p(t){c.value=t}function v(){c.value=void 0}return Object(r["proxyRefs"])({loading:a,list:o,tree:s,hasNoData:i,activeValue:c,activeItem:l,axiosParams:d,change:p,reset:v})}function Gt(t){if(!t.length)return[];t=Object(u["clone"])(t);var e,a={},n=Object(i["a"])(t);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=r.system.indexOf(":");if(-1!==o){var s=r.system.slice(0,o),c=a[s];c?c.numChild++:a[s]=Object(ot["a"])(Object(ot["a"])({},r),{},{system:s,dummy:!0,numChild:1})}}}catch(m){n.e(m)}finally{n.f()}for(var l in a){var d=a[l];t.push(Object(ot["a"])(Object(ot["a"])({},d),{},{system:d.system+":all"}))}t=Object(u["orderBy"])(t,"system");var p=t.findIndex((function(t){return"internal"===t.system}));if(p>=0){var v=t[p];v.dummy=!0,t.splice(p,1),t.unshift(v)}return t.unshift({system:"all",dummy:!0,numChild:0}),t}function Xt(t){return t=Object(u["clone"])(t),t=t.filter((function(t){return 1!==t.numChild})),t.slice(0).forEach((function(e){if(e.system.endsWith(":all")){for(var a=[],n=e.system.slice(0,-"all".length),r=t.length-1;r>=0;r--){var o=t[r];o.system!=e.system&&(o.system.startsWith(n)&&(t.splice(r,1),a.push(o)))}e.children=a}})),t}var Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-no-wrap"},[a("v-btn",{attrs:{text:"",icon:"",disabled:!t.dateRange.hasPrevPeriod,title:"Previous period"},on:{click:t.dateRange.prevPeriod}},[a("v-icon",{staticClass:"small"},[t._v("mdi-chevron-left")])],1),t.dateRange.gte?a("DateTimePeriodMenu",{attrs:{"date-range":t.dateRange,periods:t.periods}}):t._e(),a("PeriodPickerMenu",{attrs:{value:t.dateRange.duration,periods:t.periods},on:{input:function(e){return t.dateRange.changeDuration(e)}}}),a("v-btn",{attrs:{text:"",icon:"",disabled:!t.dateRange.hasNextPeriod,title:"Next period"},on:{click:t.dateRange.nextPeriod}},[a("v-icon",{staticClass:"small"},[t._v("mdi-chevron-right")])],1),a("v-btn",{staticClass:"ml-2",attrs:{small:"",outlined:""},on:{click:t.dateRange.reload}},[a("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-refresh")]),a("span",[t._v(t._s(t.dateRange.isNow?"Reload":"Reset"))])],1)],1)},Ut=[],Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[t.dateRange.isNow?a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),n),[a("v-icon",{attrs:{small:"",title:t.datetimeFull(t.dateRange.gte)}},[t._v("mdi-calendar-blank")])],1):a("v-btn",t._g(t._b({staticClass:"px-1",attrs:{text:"",small:""}},"v-btn",r,!1),n),[a("XDate",{attrs:{date:t.dateRange.gte,format:t.format}}),a("v-icon",[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("DateTimePeriod",{attrs:{"date-range":t.dateRange,periods:t.periods},on:{"click:ok":function(e){t.menu=!1}}})],1)},Wt=[],zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{width:"340"}},[a("v-tabs",{attrs:{"background-color":"primary",dark:"","icons-and-text":"","fixed-tabs":""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab",{attrs:{href:"#date"}},[t._v(" Date "),a("v-icon",[t._v("mdi-calendar-outline")])],1),a("v-tab",{attrs:{href:"#time"}},[t._v(" Time "),a("v-icon",[t._v("mdi-clock-outline")])],1),a("v-tab",{attrs:{href:"#period"}},[t._v(" Period "),a("v-icon",[t._v("mdi-calendar-range-outline")])],1)],1),a("v-tabs-items",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab-item",{attrs:{value:"date"}},[a("v-date-picker",{attrs:{"full-width":""},model:{value:t.dateRange.datePicker,callback:function(e){t.$set(t.dateRange,"datePicker",e)},expression:"dateRange.datePicker"}})],1),a("v-tab-item",{attrs:{value:"time"}},[a("v-time-picker",{staticClass:"v-time-picker-custom",attrs:{format:"24hr","full-width":""},model:{value:t.dateRange.timePicker,callback:function(e){t.$set(t.dateRange,"timePicker",e)},expression:"dateRange.timePicker"}})],1),a("v-tab-item",{attrs:{value:"period"}},[a("v-card",{attrs:{"min-height":"378px"}},[a("PeriodList",{attrs:{"date-range":t.dateRange,periods:t.periods}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$emit("click:ok")}}},[t._v("OK")])],1)],1)},Kt=[],Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{attrs:{dense:""}},[a("v-list-item-group",{attrs:{color:"primary"},model:{value:t.activePeriodMs,callback:function(e){t.activePeriodMs=e},expression:"activePeriodMs"}},t._l(t.periods,(function(e){return a("v-list-item",{key:e.ms,attrs:{value:e.ms}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),1)],1)},Zt=[],Yt=Object(r["defineComponent"])({name:"PeriodList",props:{dateRange:{type:Object,required:!0},periods:{type:Array,required:!0}},setup:function(t,e){var a=e.emit,n=Object(r["computed"])({get:function(){return t.dateRange.duration},set:function(e){t.dateRange.changeDuration(e)}}),o=Object(r["computed"])((function(){var e=t.periods.find((function(t){return t.ms===n.value}));return e}));return Object(r["onMounted"])((function(){Object(r["watchEffect"])((function(){if(!o.value){var e=t.periods[0];n.value=e.ms}}))})),Object(r["watch"])(o,(function(t){a("update:period",t)}),{immediate:!0}),{activePeriodMs:n,activePeriod:o}}}),te=Yt,ee=a("206a"),ae=a("4c49"),ne=a("7e7e"),re=a("f6d92"),oe=Object(h["a"])(te,Jt,Zt,!1,null,null,null),se=oe.exports;y()(oe,{VList:ee["a"],VListItem:ae["a"],VListItemContent:ne["b"],VListItemGroup:re["a"],VListItemTitle:ne["c"]});var ie=Object(r["defineComponent"])({name:"DateTimePeriod",components:{PeriodList:se},props:{dateRange:{type:Object,required:!0},periods:{type:Array,required:!0}},setup:function(){var t=Object(r["ref"])();return{activeTab:t}}}),ue=ie,ce=(a("d36a"),a("d2e5")),le=a("4873"),de=a("0852"),pe=a("c599"),ve=a("f35a"),me=a("42f1"),fe=Object(h["a"])(ue,zt,Kt,!1,null,null,null),be=fe.exports;y()(fe,{VBtn:L["a"],VCard:ce["a"],VCardActions:le["a"],VDatePicker:de["a"],VIcon:U["a"],VSpacer:z["a"],VTab:K["a"],VTabItem:pe["a"],VTabs:J["a"],VTabsItems:ve["a"],VTimePicker:me["a"]});var he=Object(r["defineComponent"])({name:"DateTimePeriodMenu",components:{DateTimePeriod:be},props:{dateRange:{type:Object,required:!0},periods:{type:Array,required:!0},format:{type:String,default:"short"}},setup:function(){var t=Object(r["ref"])(!1);return{menu:t,datetimeFull:Ct}}}),ge=he,ye=a("6daa"),xe=Object(h["a"])(ge,Qt,Wt,!1,null,"6a16f40c",null),Oe=xe.exports;y()(xe,{VBtn:L["a"],VIcon:U["a"],VMenu:ye["a"]});var _e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"px-1",attrs:{text:"",small:""}},n),[t.activePeriod?a("span",[t._v(t._s(t.activePeriod.text))]):a("span",[t._v("Period")]),a("v-icon",[t._v("mdi-menu-down")])],1)]}}])},[a("v-list",{attrs:{dense:""}},[a("v-list-item-group",{attrs:{value:t.value,mandatory:""},on:{change:t.onChange}},t._l(t.periods,(function(e){return a("v-list-item",{key:e.ms,attrs:{value:e.ms}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Last "+t._s(e.text))])],1)],1)})),1)],1)],1)},je=[],Ce=Object(r["defineComponent"])({name:"PeriodPickerMenu",props:{value:{type:Number,required:!0},periods:{type:Array,required:!0}},setup:function(t,e){var a=e.emit,n=Object(r["computed"])((function(){var e=t.periods.find((function(e){return e.ms===t.value}));return e}));function o(t){a("input",t)}return{activePeriod:n,onChange:o}}}),we=Ce,ke=Object(h["a"])(we,_e,je,!1,null,"c084ad56",null),Se=ke.exports;function Ve(t){for(var e=[],a=0,n=[1,3,6,12,24];a<n.length;a++){var r=n[a];e.push({text:"".concat(r," ").concat(1===r?"hour":"hours"),ms:r*xt})}for(var o=0,s=[3,7,10,14,30];o<s.length;o++){var i=s[o];i<=t&&e.push({text:"".concat(i," days"),ms:i*Ot})}return e}y()(ke,{VBtn:L["a"],VIcon:U["a"],VList:ee["a"],VListItem:ae["a"],VListItemContent:ne["b"],VListItemGroup:re["a"],VListItemTitle:ne["c"],VMenu:ye["a"]});var qe=Object(r["defineComponent"])({name:"DateRangePicker",components:{DateTimePeriodMenu:Oe,PeriodPickerMenu:Se},props:{dateRange:{type:Object,required:!0},defaultPeriod:{type:Number,default:xt}},setup:function(t){var e=Object(r["computed"])((function(){return Ve(30)}));return Object(r["onMounted"])((function(){Object(r["watchEffect"])((function(){if(!t.dateRange.duration){var a=e.value.find((function(e){return e.ms===t.defaultPeriod}));a?t.dateRange.changeDuration(a.ms):t.dateRange.changeDuration(e.value[0].ms)}}))})),{periods:e}}}),Pe=qe,Te=Object(h["a"])(Pe,Ht,Ut,!1,null,"10a87f18",null),Re=Te.exports;y()(Te,{VBtn:L["a"],VIcon:U["a"]});var Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container--fixed-sm"},[a("PageToolbar",{attrs:{loading:t.loading}},[a("v-toolbar-title",[t._v("Send data to Uptrace")]),a("v-spacer"),t.dateRange?a("v-btn",{attrs:{small:"",outlined:""},on:{click:t.dateRange.reload}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-refresh")]),a("span",{staticClass:"ml-1"},[t._v("Reload")])],1):t._e()],1),a("v-container",{staticClass:"mb-6 px-4 py-6"},[a("v-row",[a("v-col",{staticClass:"text-body-1"},[a("p",[t._v(" To start sending data to Uptrace, you need to install Uptrace client and configure it using the provided DSN (connection string). ")]),a("p",[t._v("For Go and .NET use "),a("strong",[t._v("OTLP/gRPC")]),t._v(":")]),a("XCode",{staticClass:"mb-4",attrs:{code:t.otlpGrpc}}),a("p",[t._v("For Python, Ruby, and Node.JS use "),a("strong",[t._v("OTLP/HTTP")]),t._v(":")]),a("XCode",{staticClass:"mb-4",attrs:{code:t.otlpHttp}}),a("p",[t._v(" For example, to run Go "),a("a",{attrs:{href:"https://github.com/uptrace/uptrace-go/tree/master/example/basic",target:"_blank"}},[t._v("basic")]),t._v(" example: ")]),a("XCode",{staticClass:"mb-4",attrs:{code:t.goCmd,language:"go"}})],1)],1),a("v-row",[a("v-col",[a("DistroList")],1)],1)],1),a("PageToolbar",{attrs:{loading:t.loading}},[a("v-toolbar-title",[t._v("Already using OpenTelemetry Collector?")])],1),a("v-container",{staticClass:"mb-6 px-4 py-6"},[a("v-row",[a("v-col",{staticClass:"text-body-1"},[t._v(" Uptrace natively supports OpenTelemetry Protocol (OTLP) in case you are already using OpenTelemetry Collector. Use the following OTLP exporter config: ")])],1),a("v-row",[a("v-col",[a("CollectorTabs",{attrs:{http:t.otlpHttp,grpc:t.otlpGrpc}})],1)],1)],1),a("HelpLinks")],1)},Ee=[],De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{align:"end"}},t._l(t.distros,(function(t){return a("v-col",{key:t.name,staticClass:"flex-grow-1",attrs:{cols:"6",sm:"3",lg:"2"}},[a("Devicon",{attrs:{name:t.name,icon:t.icon,to:t.to}})],1)})),1)},Le=[],Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[a("v-card",{staticClass:"mx-auto",attrs:{flat:!n,color:n?"white":"transparent"}},[a("v-card-text",{staticClass:"text-center"},[a("a",{attrs:{href:t.to,title:"Uptrace for "+t.name,target:"_blank"}},[a("v-img",{staticClass:"mx-auto",attrs:{src:t.icon,"max-width":"80","aspect-ratio":"1",contain:"",alt:t.name}}),a("div",{staticClass:"mt-2 text-subtitle-1 text-no-wrap"},[t._v(t._s(t.name))])],1)])],1)]}}])})},Ne=[],$e=Object(r["defineComponent"])({name:"Devicon",props:{name:{type:String,required:!0},icon:{type:String,required:!0},to:{type:String,required:!0}}}),Be=$e,Ae=(a("32f8"),a("fd7f")),Fe=Object(h["a"])(Be,Me,Ne,!1,null,"bcf144b8",null),Ge=Fe.exports;y()(Fe,{VCard:ce["a"],VCardText:le["b"],VHover:Ae["a"],VImg:x["a"]});var Xe=Object(r["defineComponent"])({name:"DistroList",components:{Devicon:Ge},setup:function(){var t=Object(r["computed"])((function(){return[{name:"Go",icon:"/devicon/go-original.svg",to:e("go")},{name:"Python",icon:"/devicon/python-original.svg",to:e("python")},{name:"Ruby",icon:"/devicon/ruby-original.svg",to:e("ruby")},{name:"Node.js",icon:"/devicon/nodejs-original.svg",to:e("js-node")},{name:".NET",icon:"/devicon/dot-net-original.svg",to:e("dotnet")},{name:"Java",icon:"/devicon/java-original.svg",to:e("java")}]}));function e(t){return"https://docs.uptrace.dev/guide/".concat(t,".html")}return{distros:t}}}),He=Xe,Ue=Object(h["a"])(He,De,Le,!1,null,"014cc586",null),Qe=Ue.exports;y()(Ue,{VCol:X["a"],VRow:W["a"]});var We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-tabs",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab",{attrs:{href:"#grpc"}},[t._v("GRPC")]),a("v-tab",{attrs:{href:"#http"}},[t._v("HTTP")])],1),a("v-tabs-items",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("v-tab-item",{attrs:{value:"grpc"}},[a("XCode",{attrs:{language:"yaml",code:t.otlpGrpc}})],1),a("v-tab-item",{attrs:{value:"http"}},[a("XCode",{attrs:{language:"yaml",code:t.otlpHttp}})],1)],1)],1)},ze=[],Ke=(a("cbf9"),Object(r["defineComponent"])({name:"CollectorTabs",props:{grpc:{type:String,default:""},http:{type:String,default:""}},setup:function(t){var e=Object(r["ref"])(),a=Object(r["computed"])((function(){return Je(Ze,t.grpc)})),n=Object(r["computed"])((function(){return Je(Ye,t.http)}));return{tabs:e,otlpGrpc:a,otlpHttp:n}}}));function Je(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return t.replace(/{(\d+)}/g,(function(t,e){return"undefined"!==typeof a[e]?a[e]:t}))}var Ze="\nexporters:\n  otlp:\n    endpoint: {0}\n    tls:\n      insecure: true\n".trim(),Ye="\nexporters:\n  otlphttp:\n    endpoint: {0}\n    tls:\n      insecure: true\n".trim(),ta=Ke,ea=Object(h["a"])(ta,We,ze,!1,null,"0e358e61",null),aa=ea.exports;y()(ea,{VCard:ce["a"],VTab:K["a"],VTabItem:pe["a"],VTabs:J["a"],VTabsItems:ve["a"]});var na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageToolbar",[a("v-toolbar-title",[t._v("See also")])],1),a("v-container",{staticClass:"mb-6"},[a("v-card",{attrs:{flat:""}},[a("v-card-text",{staticClass:"text-subtitle-1"},[a("ul",[a("li",[a("a",{attrs:{href:"https://docs.uptrace.dev/",target:"_blank"}},[t._v("Uptrace documentation")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/",target:"_blank"}},[t._v("OpenTelemetry documentation")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/instrumentations/",target:"_blank"}},[t._v("Instrumentations")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/collector/",target:"_blank"}},[t._v("Collector Configurator")])]),a("li",[a("a",{attrs:{href:"https://opentelemetry.uptrace.dev/attributes/",target:"_blank"}},[t._v("Semantic attributes")])]),a("li",[a("a",{attrs:{href:"https://github.com/uptrace",target:"_blank"}},[t._v("GitHub")])])])]),a("v-card-text",{staticClass:"text-body-1 text--primary"},[t._v(" Have questions? Don't hesitate to "),a("a",{attrs:{href:"mailto:support@uptrace.dev"}},[t._v("email")]),t._v(" us. We reply as soon as possible. ")])],1)],1)],1)},ra=[],oa=Object(r["defineComponent"])({name:"HelpLinks"}),sa=oa,ia=a("98ad"),ua=Object(h["a"])(sa,na,ra,!1,null,null,null),ca=ua.exports;y()(ua,{VCard:ce["a"],VCardText:le["b"],VContainer:H["a"],VToolbarTitle:ia["a"]});var la=Object(r["defineComponent"])({name:"HelpCard",components:{DistroList:Qe,CollectorTabs:aa,HelpLinks:ca},props:{loading:{type:Boolean,default:!1},dateRange:{type:Object,default:void 0}},setup:function(){var t=At((function(){return{url:"/api/tracing/conn-info"}})),e=t.data,a=Object(r["computed"])((function(){var t,a;return null!==(t=null===(a=e.value)||void 0===a?void 0:a.grpc)&&void 0!==t?t:"http://localhost:4317"})),n=Object(r["computed"])((function(){var t,a;return null!==(t=null===(a=e.value)||void 0===a?void 0:a.http)&&void 0!==t?t:"http://localhost:14318"})),o=Object(r["computed"])((function(){return da("UPTRACE_DSN={0} go run .",a.value)}));return{otlpGrpc:a,otlpHttp:n,goCmd:o}}});function da(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return t.replace(/{(\d+)}/g,(function(t,e){return"undefined"!==typeof a[e]?a[e]:t}))}var pa=la,va=Object(h["a"])(pa,Ie,Ee,!1,null,"3be8ad70",null),ma=va.exports;y()(va,{VBtn:L["a"],VCol:X["a"],VContainer:H["a"],VIcon:U["a"],VRow:W["a"],VSpacer:z["a"],VToolbarTitle:ia["a"]});var fa,ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",[a("v-card",{staticClass:"mb-4",attrs:{outlined:"",rounded:"lg"}},[a("v-toolbar",{attrs:{flat:"",color:"light-blue lighten-5"}},[a("v-toolbar-title",[t._v("Systems")]),a("v-spacer"),a("v-btn",{staticClass:"primary",attrs:{to:t.exploreRoute,small:""}},[t._v("Open explorer")])],1),a("v-card-text",{staticClass:"pb-0"},[t.systems.types.length>=3?a("v-slide-group",{staticClass:"ml-2",attrs:{"center-active":"","show-arrows":""},model:{value:t.systems.filter,callback:function(e){t.$set(t.systems,"filter",e)},expression:"systems.filter"}},t._l(t.systems.types,(function(e,n){return a("v-slide-item",{key:e,attrs:{value:e},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.active,s=r.toggle;return[a("v-btn",{class:{"ml-1":n>0},attrs:{"input-value":o,"active-class":"blue white--text",small:"",depressed:"",rounded:""},on:{click:s}},[t._v(" "+t._s(e)+" ")])]}}],null,!0)})})),1):t._e()],1),a("v-card-text",[a("OverviewTable",{attrs:{"date-range":t.dateRange,loading:t.systems.loading,items:t.systems.pageSystems,order:t.systems.order}})],1)],1),a("XPagination",{attrs:{pager:t.systems.pager}})],1)},ha=[],ga=a("c0ac"),ya=a("b361");a("3856"),a("bd32"),a("a9bc"),a("4c82"),a("2dc3"),a("2bd3");function xa(t){var e=Oa(t),a=Object(it["a"])(e,2),n=a[0],r=a[1];return n===fa.allSystem||r===fa.allSystem}function Oa(t){if(!t)return["",""];var e=t.indexOf(":");return e>=0?t.slice(e+1)===fa.allSystem?[t.slice(0,e),fa.allSystem]:[t.slice(0,e),t]:[t,t]}function _a(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function ja(t){if("string"!==typeof t)return JSON.stringify(t);if(!t.length)return'""';if("'"===t[0]&&"'"===t[t.length-1])return t;if('"'===t[0]&&'"'===t[t.length-1])return t;var e=parseFloat(t);return isNaN(e)||e.toString()!==t?JSON.stringify(t):e}(function(t){t["allSystem"]="all",t["internalSystem"]="internal",t["itemId"]="item.id",t["itemName"]="item.name",t["spanEvents"]="span.events",t["spanId"]="span.id",t["spanParentId"]="span.parent_id",t["spanTraceId"]="span.trace_id",t["spanSystem"]="span.system",t["spanGroupId"]="span.group_id",t["spanName"]="span.name",t["spanKind"]="span.kind",t["spanTime"]="span.time",t["spanDuration"]="span.duration",t["spanStatusCode"]="span.status_code",t["spanStatusMessage"]="span.status_message",t["spanCount"]="span.count",t["spanCountPerMin"]="span.count_per_min",t["spanErrorCount"]="span.error_count",t["spanErrorPct"]="span.error_pct",t["serviceName"]="service.name",t["hostName"]="host.name",t["enduserId"]="enduser.id",t["httpMethod"]="http.method",t["httpStatusCode"]="http.status_code",t["rpcMethod"]="rpc.method",t["dbStatement"]="db.statement",t["dbSqlTable"]="db.sql.table",t["exceptionStacktrace"]="exception.stacktrace",t["codeFunction"]="code.function",t["codeFilepath"]="code.filepath"})(fa||(fa={}));var Ca=" | ",wa=/^where\s+span\.group_id\s+=\s+(\S+)$/i;function ka(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=null!==(t=e.paramName)&&void 0!==t?t:"query",n=l(),o=n.router,s=n.route,i=Object(r["shallowRef"])(!1),u=Object(r["shallowRef"])([]),c=Object(r["computed"])({set:function(t){u.value=Sa(t).map((function(t){return Object(r["reactive"])(t)}))},get:function(){return qa(u.value)}});function p(t){u.value.splice(t,1),u.value=u.value}function v(t){t.disabled=!t.disabled}function m(t){t.editQuery=t.query,t.editMode=!0}function f(t,e){e&&(t.editQuery!==t.query&&(t.error=""),t.query=t.editQuery),t.editMode=!1}function b(t){u.value.length===t.length&&u.value.forEach((function(e,a){var n,r,o=t[a];e.query=o.query,e.error=null!==(n=o.error)&&void 0!==n?n:"",e.disabled=null!==(r=o.disabled)&&void 0!==r&&r}))}function h(){return{query:c.value}}function g(){return new Pa(c.value)}function y(t){e.syncQuery?o.push({query:Object(ot["a"])(Object(ot["a"])({},s.value.query),{},Object(st["a"])({},a,t.toString()))}).catch((function(){})):c.value=t.toString()}return"string"===typeof e.query?c.value=e.query:e.query&&Object(r["watch"])(e.query,(function(t){c.value=t}),{immediate:!0}),e.syncQuery&&d().sync({fromQuery:function(t){var n,r,o=null!==(n=null!==(r=t[a])&&void 0!==r?r:e.query)&&void 0!==n?n:"";t.where&&(o+=Ca+"where "+t.where),c.value=o},toQuery:function(){return Object(st["a"])({},a,c.value)}}),Object(r["proxyRefs"])({rawMode:i,parts:u,query:c,removeAt:p,toggle:v,enterEditMode:m,exitEditMode:f,syncParts:b,axiosParams:h,createEditor:g,commitEdits:y})}function Sa(t){return t&&"string"===typeof t?t.split(Ca).map((function(t){return t.trim()})).filter((function(t){return t.length})).map((function(t){return Va(t)})):[]}function Va(t){return{query:t,error:"",disabled:!1,editMode:!1,editQuery:""}}function qa(t){return t.map((function(t){return t.query})).join(Ca)}var Pa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(ga["a"])(this,t),Object(st["a"])(this,"parts",void 0),this.parts=Sa(e)}return Object(ya["a"])(t,[{key:"toString",value:function(){return qa(this.parts)}},{key:"reset",value:function(){return this.parts=[],this.add(Ta(fa.spanGroupId)),this}},{key:"add",value:function(t){var e,a=this,n=Object(i["a"])(Sa(t));try{var r=function(){var t=e.value,n=a.parts.findIndex((function(e){return e.query===t.query}));-1===n&&a.parts.push(t)};for(n.s();!(e=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}return this}},{key:"where",value:function(t,e,a){return void 0===a?this.replaceOrPush(new RegExp("^where\\s+".concat(_a(t),"\\s+").concat(e,"$"),"i"),"where ".concat(t," ").concat(e)):this.replaceOrPush(new RegExp("^where\\s+".concat(_a(t),"\\s+").concat(e,"\\s+.+$"),"i"),"where ".concat(t," ").concat(e," ").concat(ja(a)))}},{key:"replace",value:function(t,e){var a=this.parts.find((function(e){return t.test(e.query)}));return!!a&&(a.query=e,!0)}},{key:"replaceOrPush",value:function(t,e){return this.replace(t,e)||this.parts.push(Va(e)),this}},{key:"replaceOrUnshift",value:function(t,e){return this.replace(t,e)||this.parts.unshift(Va(e)),this}},{key:"remove",value:function(t){var e;e="string"===typeof t?this.parts.findIndex((function(e){return e.query===t})):this.parts.findIndex((function(e){return t.test(e.query)})),e>=0&&this.parts.splice(e,1)}},{key:"groupId",value:function(){var t,e=Object(i["a"])(this.parts);try{for(e.s();!(t=e.n()).done;){var a=t.value,n=a.query.match(wa);if(n)return n[1]}}catch(r){e.e(r)}finally{e.f()}return""}},{key:"removeGroupFilter",value:function(){return this.remove(wa),this}},{key:"replaceGroupBy",value:function(t){return this.replaceOrUnshift(/^group\s+by\s+/i,"group by ".concat(t))}}]),t}();function Ta(t){var e=["group by ".concat(t),fa.spanCountPerMin,fa.spanErrorPct,"p50(".concat(fa.spanDuration,")"),"p90(".concat(fa.spanDuration,")"),"p99(".concat(fa.spanDuration,")")];return e.join(Ca)}function Ra(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{perPage:10},e=Object(r["shallowRef"])(0),a=Object(r["shallowRef"])(1),n=Object(r["shallowRef"])(t.perPage),o=Object(r["computed"])((function(){var t=(a.value-1)*n.value,r=t+n.value;return r>e.value&&(r=e.value),{start:t,end:r}})),s=Object(r["computed"])((function(){var t=1e3,a=Math.ceil(e.value/n.value);return a>t?t:a})),i=Object(r["computed"])((function(){return a.value>1}));function u(){i.value&&a.value--}var c=Object(r["computed"])((function(){return a.value<s.value}));function l(){c.value&&a.value++}function d(){a.value=1}function p(){return{page:a.value,limit:n.value}}return Object(r["watch"])(s,(function(t){a.value>t&&(a.value=1)})),Object(r["proxyRefs"])({numItem:e,page:a,perPage:n,pos:o,numPage:s,hasPrev:i,prev:u,hasNext:c,next:l,reset:d,axiosParams:p})}function Ia(){var t,e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.column=null!==(t=a.column)&&void 0!==t?t:"",a.desc=null===(e=a.desc)||void 0===e||e;var n=Object(r["shallowRef"])(a.column),o=Object(r["shallowRef"])(a.desc),s=Object(r["shallowRef"])({}),i=Object(r["computed"])((function(){return o.value?"mdi-arrow-down":"mdi-arrow-up"}));function u(t){n.value=t.column,o.value=t.desc}function c(t){n.value!==t?(n.value=t,o.value=!0):o.value=!o.value}function l(t){var e=["cursor-pointer"];return n.value===t&&e.push("active"),o.value?e.push("desc"):e.push("asc"),e}function d(){n.value="",o.value=!0}return Object(r["watch"])((function(){return{sort_by:n.value,sort_dir:Ea(o.value)}}),(function(t){s.value=t}),{immediate:!0,flush:"sync"}),Object(r["proxyRefs"])({column:n,desc:o,icon:i,axiosParams:s,change:u,reset:d,toggle:c,thClass:l})}function Ea(t){return t?"desc":"asc"}function Da(t){var e=Ra({perPage:15}),a=Ia({column:"system",desc:!1}),n=Object(r["ref"])(""),o=At((function(){return{url:"/api/tracing/systems-stats",params:Object(ot["a"])({},t.axiosParams())}})),s=o.loading,c=o.data,l=Object(r["computed"])((function(){var t,e,a=null!==(t=null===(e=c.value)||void 0===e?void 0:e.systems)&&void 0!==t?t:[];return a})),d=Object(r["computed"])((function(){var t,e=Object(u["orderBy"])(l.value,null!==(t=a.column)&&void 0!==t?t:"system",a.desc?"desc":"asc");return e})),p=Object(r["computed"])((function(){return n.value?d.value.filter((function(t){return t.system.startsWith(n.value)})):d.value})),v=Object(r["computed"])((function(){var t=p.value.slice(e.pos.start,e.pos.end);return t})),m=Object(r["computed"])((function(){var t,e=[],a=Object(i["a"])(l.value);try{for(a.s();!(t=a.n()).done;){var n=t.value,r=n.system,o=r.indexOf(":");o>=0&&(r=r.slice(0,o)),-1===e.indexOf(r)&&e.push(r)}}catch(s){a.e(s)}finally{a.f()}return e.sort()}));return Object(r["watch"])(p,(function(t){e.numItem=t.length}),{flush:"sync"}),Object(r["proxyRefs"])({pager:e,order:a,filter:n,loading:s,list:p,pageSystems:v,types:m})}var La,Ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"v-data-table--large"},[a("thead",{staticClass:"v-data-table-header"},[a("tr",[t.column?a("ThOrder",{attrs:{value:t.column,order:t.order}},[t._v(t._s(t.column))]):t._e(),a("ThOrder",{attrs:{value:"system",order:t.order}},[t._v("System")]),a("ThOrder",{attrs:{value:"rate",order:t.order,align:"center"}},[t._v("Spans per minute")]),a("ThOrder",{attrs:{value:"errorPct",order:t.order,align:"center"}},[t._v("Errors")]),a("ThOrder",{attrs:{value:"p50",order:t.order,align:"center"}},[t._v("P50 latency")]),a("ThOrder",{attrs:{value:"p99",order:t.order,align:"center"}},[t._v("P99 latency")])],1)]),a("thead",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[a("tr",{staticClass:"v-data-table__progress"},[a("th",{staticClass:"column",attrs:{colspan:"99"}},[a("v-progress-linear",{attrs:{height:"2",absolute:"",indeterminate:""}})],1)])]),t.items.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no data for the selected date range.")])])]),a("tbody",t._l(t.items,(function(e,n){return a("tr",{key:n},[t.column?a("td",{staticClass:"text-subtitle-1"},[a("router-link",{attrs:{to:t.columnRoute(e[t.column])},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e[t.column])+" ")])],1):t._e(),a("td",{staticClass:"text-subtitle-1"},[a("router-link",{attrs:{to:t.groupListRoute(e.system)},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(e.system)+" ")])],1),a("td",{staticClass:"text-subtitle-2"},[a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"rate",line:e.stats.rate,time:e.stats.time}}),a("XNum",{attrs:{value:e.rate}})],1)]),a("td",{staticClass:"text-subtitle-2"},[e.stats.errorCount?a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"errorPct",line:e.stats.errorPct,time:e.stats.time}}),t._v(" "+t._s(t.percent(e.errorPct))+" ")],1):t._e()]),a("td",{staticClass:"text-subtitle-2"},[e.stats.p50?a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"p50",line:e.stats.p50,time:e.stats.time}}),a("XDuration",{attrs:{duration:e.p50}})],1):t._e()]),a("td",{staticClass:"text-subtitle-2"},[e.stats.p99?a("div",{staticClass:"d-flex align-center"},[a("SparklineChart",{staticClass:"mr-2",attrs:{name:"p99",line:e.stats.p99,time:e.stats.time}}),a("XDuration",{attrs:{duration:e.p99}})],1):t._e()])])})),0)])],1)},Na=[];a("970e");(function(t){t["Start"]="start",t["End"]="end",t["Center"]="center"})(La||(La={}));var $a,Ba,Aa=n["default"].component("ThSort",{functional:!0,props:{value:{type:String,default:""},order:{type:Object,required:!0},align:{type:String,default:"start"}},render:function(t,e){var a,n=e.props,r=e.data,o=e.slots,s=[t("span",o().default)],i=t(U["a"],{props:{size:18},class:"v-data-table-header__icon"},"mdi-arrow-up");switch(n.align){case La.Start:a="text-left",s.push(i);break;case La.End:a="text-right",s.unshift(i);break;case La.Center:a="text-center",s.push(i);break;default:throw new Error("unknown ".concat(n.align))}return t("th",Object(ot["a"])(Object(ot["a"])({},r),{},{class:["text-no-wrap",a,n.order.thClass(n.value)],on:{click:function(){n.order.toggle(n.value)}}}),s)}}),Fa=Aa,Ga=Object(h["a"])(Fa,$a,Ba,!1,null,"6e0f5777",null),Xa=Ga.exports,Ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("EChart",{attrs:{width:t.chart.width,height:t.chart.height,option:t.chart.option}})},Ua=[],Qa=(a("9814"),a("0963")),Wa=a("e1ab"),za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container"},[a("v-sheet",{staticClass:"mx-auto echart",attrs:{width:t.width,height:t.height}})],1)},Ka=[],Ja=(a("4ace"),a("8594"),Object(r["defineComponent"])({name:"EChart",props:{loading:{type:Boolean,default:!1},value:{type:Object,default:void 0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],required:!0},option:{type:Object,default:void 0},group:{type:[String,Symbol],default:void 0}},setup:function(t,e){var a,n=Object(r["shallowRef"])();function o(){if(!a){var r=n.value.getElementsByClassName("echart")[0];a=Qa["b"](r),e.emit("input",a),t.group&&Ya(t.group,a)}}var s=Object(u["debounce"])((function(t){a.isDisposed()||a.setOption(t,{notMerge:!0,lazyUpdate:!0,silent:!0})}),50);return Object(r["onMounted"])((function(){Object(r["watch"])((function(){return t.option}),(function(t){t&&(o(),s(t))}),{immediate:!0}),Object(r["watch"])((function(){return t.loading}),(function(t){o(),t?a.showLoading():a.hideLoading()}),{immediate:!0})})),Object(r["onUnmounted"])((function(){a&&(t.group&&tn(t.group,a),a.dispose())})),{container:n}}})),Za={};function Ya(t,e){var a=Za[t];a||(a=[],Za[t]=a),a.push(e),en(e,a)}function tn(t,e){var a=Za[t];if(a){var n=a.indexOf(e);n>=0&&a.splice(n,1)}}function en(t,e){t.on("updateAxisPointer",(function(a){for(var n=t.makeActionFromEvent(a),r=n.axesInfo||[],o=r.length-1;o>=0;o--)"y"===r[o].axisDim&&r.splice(o,1);var s,u=Object(i["a"])(e);try{for(u.s();!(s=u.n()).done;){var c=s.value;c!==t&&(delete n.axesInfo,c.dispatchAction(n,!0))}}catch(l){u.e(l)}finally{u.f()}}))}var an,nn=Ja,rn=(a("735d"),a("159b")),on=Object(h["a"])(nn,za,Ka,!1,null,null,null),sn=on.exports;function un(t,e){var a="number"===typeof e;if(!a&&void 0!==e)return an.None;switch(t){case"count":case"rate":return an.None;case"errorPct":return an.Percents;case"p50":case"p90":case"p99":return an.Nanoseconds}var n="",r=t.match(/(\S+)\((\S+)\)/);return n=r?r[2]:t,cn(n)?an.Nanoseconds:ln(n)?an.Bytes:dn(n)?an.Percents:an.None}function cn(t){return t===fa.spanDuration||pn(t,"duration")}function ln(t){return pn(t,"bytes")}function dn(t){return t===fa.spanErrorPct||pn(t,"pct")}function pn(t,e){return t.endsWith("."+e)||t.endsWith("_"+e)}y()(on,{VSheet:rn["a"]}),function(t){t["None"]="",t["Bytes"]="bytes",t["Nanoseconds"]="nanoseconds",t["Percents"]="percents"}(an||(an={}));var vn=a("8168"),mn=a.n(vn);function fn(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return bn(t,e,Object(ot["a"])({trimMantissa:!0},a))}function bn(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"undefined"===typeof t?"0":mn()(t).format(Object(ot["a"])({mantissa:e},a))}function hn(t){return"number"!==typeof t||0===t?"0":Math.abs(t)<1?fn(t,3):Math.abs(t)<1e3?fn(t,1):(t/=1e3,Math.abs(t)<100?bn(t,1)+"k":Math.abs(t)<1e3?bn(t,0)+"k":(t/=1e3,Math.abs(t)<1e3?bn(t,1)+"m":(t/=1e3,bn(t,1)+"b")))}function gn(t){return"number"!==typeof t||Math.abs(t)<1e-4?"0%":mn()(t).format({output:"percent",mantissa:yn(t),optionalMantissa:!0})}function yn(t){return t=Math.abs(t),t<.01?2:t<.1?1:0}function xn(t){if("number"!==typeof t||0===t)return"0";if(Math.abs(t)<10)return fn(t,2);if(Math.abs(t)<1024)return fn(t,1);for(var e=0,a=["KB","MB","GB","TB","PB"];e<a.length;e++){var n=a[e];if(t/=1024,Math.abs(t)<10)return fn(t,1)+n;if(t=Math.round(t),Math.abs(t)<1e3)return fn(t,0)+n}return fn(t,0)+"PB"}function On(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"!==typeof t||0===t?"0":Math.abs(t)<1e3?bn(t,0,e)+"ns":(t/=1e3,Math.abs(t)<100?bn(t,1,e)+"s":Math.abs(t)<1e4?bn(t,0,e)+"s":(t/=1e3,Math.abs(t)<100?bn(t,1,e)+"ms":Math.abs(t)<1e4?bn(t,0,e)+"ms":(t/=1e3,Math.abs(t)<100?bn(t,1,e)+"s":(t/=60,Math.abs(t)<10?bn(t,1,e)+"m":Math.abs(t)<100?bn(t,0,e)+"m":(t/=60,Math.abs(t)<10?bn(t,1,e)+"h":bn(t,0,e)+"h")))))}function _n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"!==typeof t||0===t?"0":Math.abs(t)<1e3?fn(t,0,e)+"ns":(t/=1e3,Math.abs(t)<1e3?fn(t,0,e)+"s":(t/=1e3,Math.abs(t)<10?fn(t,1,e)+"ms":Math.abs(t)<1e3?fn(t,0,e)+"ms":(t/=1e3,Math.abs(t)<100?fn(t,1,e)+"s":(t/=60,Math.abs(t)<100?fn(t,1,e)+"m":Math.abs(t)<100?bn(t,0,e)+"m":(t/=60,Math.abs(t)<10?bn(t,1,e)+"h":bn(t,0,e)+"h")))))}function jn(t){switch(t){case an.Percents:return gn;case an.Nanoseconds:return _n;case an.Bytes:return xn;default:return Cn}}function Cn(t){return void 0===t?"<missing>":""===t?"<empty>":"number"===typeof t?hn(t):String(t)}function wn(){return{animation:!1,textStyle:{fontFamily:'"Roboto", sans-serif'},toolbox:{show:!1},dataZoom:[{type:"inside",disabled:!0}],legend:[],grid:[],xAxis:[],yAxis:[],dataset:[],series:[],tooltip:[]}}function kn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.tooltip.push(Object(ot["a"])({trigger:"axis",appendToBody:!0,axisPointer:{type:"cross",link:[{xAxisIndex:"all"}]}},e))}function Sn(t){return function(e){var a,n=[],r=Object(i["a"])(e);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=Object(u["truncate"])(o.seriesName,{length:60}),c=o.value[o.encode.y[0]];if(n.push("<tr>"+"<td>".concat(o.marker,"</td>")+"<td>".concat(s,"</td>")+"<td>".concat(t(c),"</td>")+"</tr>"),20===n.length)break}}catch(d){r.e(d)}finally{r.f()}var l=['<div class="chart-tooltip">',"<table>","<tbody>",n.join(""),"</tbody>","</table>","</div"];return l.join("")}}var Vn=Object(r["defineComponent"])({name:"SparklineChart",components:{EChart:sn},props:{name:{type:String,required:!0},line:{type:Array,required:!0},time:{type:Array,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){var e={width:100,height:30},a=wn();return kn(a,{axisPointer:void 0,formatter:Sn(jn(un(t.name)))}),a.grid.push({show:!0,top:2,left:2,right:2,height:27,borderWidth:0}),a.xAxis.push({type:"time",show:!0,axisLine:{lineStyle:{color:Wa["a"].grey.lighten2}},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1}}),a.yAxis.push({type:"value",show:!1}),qn(a,t.name,t.line,t.time),e.option=a,e}));return{chart:e}}});function qn(t,e,a,n){t.dataset.push({source:Object(st["a"])({time:n},e,a)});var r=Wa["a"].blue.base;t.series.push({type:"line",name:e,encode:{x:"time",y:e},showSymbol:!1,lineStyle:{width:1},itemStyle:{color:r},areaStyle:{color:new Qa["a"].LinearGradient(0,0,0,1,[{offset:0,color:r},{offset:1,color:"#ffe"}])}})}var Pn=Vn,Tn=Object(h["a"])(Pn,Ha,Ua,!1,null,"e8f6d994",null),Rn=Tn.exports,In=Object(r["defineComponent"])({name:"OverviewTable",components:{ThOrder:Xa,SparklineChart:Rn},props:{dateRange:{type:Object,required:!0},loading:{type:Boolean,required:!0},items:{type:Array,default:function(){return[]}},order:{type:Object,required:!0},column:{type:String,default:""},baseColumnRoute:{type:Object,default:void 0}},setup:function(t){function e(e){var a;a=""===e?"".concat(t.column," does not exist"):"".concat(t.column," = ").concat(ja(e));var n=Object(ot["a"])({},t.baseColumnRoute);return n.query=Object(ot["a"])(Object(ot["a"])({},n.query),{},{where:a}),n}function a(e){return{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.dateRange.queryParams()),{},{system:e})}}return{xkey:fa,columnRoute:e,groupListRoute:a,percent:gn}}}),En=In,Dn=(a("c05d"),a("755a")),Ln=a("1556"),Mn=Object(h["a"])(En,Ma,Na,!1,null,null,null),Nn=Mn.exports;y()(Mn,{VProgressLinear:Dn["a"],VSimpleTable:Ln["a"]});var $n=Object(r["defineComponent"])({name:"SystemOverview",components:{OverviewTable:Nn},props:{dateRange:{type:Object,required:!0}},setup:function(t){var e=Da(t.dateRange),a=Object(r["computed"])((function(){return{name:"GroupList",query:{system:fa.allSystem,query:Ta(fa.spanSystem)}}}));return{xkey:fa,systems:e,exploreRoute:a}}}),Bn=$n,An=(a("1775"),a("4663")),Fn=a("d4eb"),Gn=a("2c70"),Xn=Object(h["a"])(Bn,ba,ha,!1,null,null,null),Hn=Xn.exports;y()(Xn,{VBtn:L["a"],VCard:ce["a"],VCardText:le["b"],VSlideGroup:An["b"],VSlideItem:Fn["a"],VSpacer:z["a"],VToolbar:Gn["a"],VToolbarTitle:ia["a"]});var Un=Object(r["defineComponent"])({name:"Overview",components:{DateRangePicker:Re,HelpCard:ma,SystemOverview:Hn},setup:function(){Object(rt["useTitle"])("Overview");var t=Rt(),e=Ft(t);return{dateRange:t,systems:e}}}),Qn=Un,Wn=Object(h["a"])(Qn,at,nt,!1,null,"ef3352a6",null),zn=Wn.exports;y()(Wn,{VCol:X["a"],VContainer:H["a"],VRow:W["a"],VSpacer:z["a"]});var Kn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",{scopedSlots:t._u([t.systems.hasNoData?{key:"placeholder",fn:function(){return[a("HelpCard",{attrs:{"date-range":t.dateRange,loading:t.systems.loading}})]},proxy:!0}:null],null,!0)},[a("div",[a("v-container",{staticClass:"pb-0",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-row",{staticClass:"mb-4",attrs:{align:"center",justify:"space-between"}},[a("v-col",{attrs:{cols:"auto"}},[a("SystemPicker",{attrs:{"date-range":t.dateRange,systems:t.systems}})],1),a("v-col",{attrs:{cols:"auto"}},[a("DateRangePicker",{attrs:{"date-range":t.dateRange}})],1)],1)],1)],1),a("v-container",{staticClass:"pt-2",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("UptraceQuery",{staticClass:"mb-1",attrs:{uql:t.uql}},[a("SpanFilters",{attrs:{uql:t.uql,systems:t.systems,"axios-params":t.axiosParams}})],1),a("GroupList",{attrs:{"date-range":t.dateRange,systems:t.systems,uql:t.uql,"axios-params":t.axiosParams}})],1)],1)},Jn=[],Zn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g(t._b({staticStyle:{"text-transform":"none"}},"v-btn",t.attrs,!1),n),[a("span",{staticClass:"px-4"},[t._v(t._s(t.systems.activeValue||"Choose system"))]),a("v-icon",{attrs:{right:"",size:"24"}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("SystemList",{attrs:{"date-range":t.dateRange,systems:t.systems,"max-height":t.maxHeight},on:{"click:item":function(e){t.menu=!1}}})],1)},Yn=[],tr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:"","max-height":t.maxHeight}},[a("v-list",{attrs:{dense:""}},[t._l(t.systems.tree,(function(e){return[e.children?a("v-menu",{key:e.system,attrs:{"open-on-hover":"","offset-x":"",transition:"slide-x-transition"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[a("v-list-item",t._g(t._b({attrs:{to:t.systemRoute(e.system),exact:""}},"v-list-item",o,!1),r),[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.system))])],1),a("v-list-item-icon",{staticClass:"align-self-center"},[a("v-icon",[t._v("mdi-menu-right")])],1)],1)]}}],null,!0)},[a("v-card",{attrs:{flat:"","max-height":t.maxHeight}},[a("v-list",{attrs:{dense:""}},t._l(e.children,(function(e){return a("v-list-item",{key:e.system,attrs:{to:t.systemRoute(e.system),exact:""},on:{click:function(e){return t.$emit("click:item")}}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.system))])],1)],1)})),1)],1)],1):a("v-list-item",{key:e.system,attrs:{to:t.systemRoute(e.system),exact:""}},[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.system))])],1)],1)]}))],2)],1)},er=[],ar=Object(r["defineComponent"])({name:"SystemList",props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},maxHeight:{type:Number,default:420}},setup:function(t){var e=l(),a=e.route;function n(e){return{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.dateRange.queryParams()),{},{system:e,query:a.value.query.query})}}return{systemRoute:n}}}),nr=ar,rr=a("27e2"),or=Object(h["a"])(nr,tr,er,!1,null,"4b20b67b",null),sr=or.exports;y()(or,{VCard:ce["a"],VIcon:U["a"],VList:ee["a"],VListItem:ae["a"],VListItemContent:ne["b"],VListItemIcon:rr["a"],VListItemTitle:ne["c"],VMenu:ye["a"]});var ir=Object(r["defineComponent"])({name:"SystemPicker",components:{SystemList:sr},props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},outlined:{type:Boolean,default:!1},maxHeight:{type:Number,default:420}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["computed"])((function(){return t.outlined?{outlined:!0}:{dark:!0,class:"blue darken-1 elevation-5"}}));return d().sync({fromQuery:function(e){e.system&&t.systems.change(e.system)},toQuery:function(){if(t.systems.activeValue)return{system:t.systems.activeValue}}}),Object(r["watch"])((function(){return t.systems.list}),(function(){t.systems.activeItem||t.systems.list.length&&t.systems.change(t.systems.list[0].system)}),{immediate:!0}),{menu:e,attrs:a}}}),ur=ir,cr=Object(h["a"])(ur,Zn,Yn,!1,null,"0a64f944",null),lr=cr.exports;y()(cr,{VBtn:L["a"],VIcon:U["a"],VMenu:ye["a"]});var dr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{staticClass:"mb-n1",attrs:{"no-gutters":"",align:"center"}},[a("v-col",[a("div",{staticClass:"d-flex filters"},[t._t("default")],2)]),a("v-col",{attrs:{cols:"auto"}},[t._e()]),a("v-col",{attrs:{cols:"auto"}},[t.uql.rawMode?a("v-btn",{attrs:{icon:"",title:"Apply filters"},on:{click:function(e){return t.exitRawMode(!0)}}},[a("v-icon",{attrs:{size:"26",color:"success"}},[t._v("mdi-check")])],1):t._e(),a("v-btn",{attrs:{icon:"",title:"Cancel editing"},on:{click:function(e){t.uql.rawMode=!t.uql.rawMode}}},[t.uql.rawMode?a("v-icon",{attrs:{size:"22"}},[t._v("mdi-pencil-off-outline")]):a("v-icon",{attrs:{size:"22"}},[t._v("mdi-pencil-outline")])],1)],1)],1),a("v-row",{attrs:{align:"center",dense:""}},[t.uql.rawMode?a("v-col",[a("v-textarea",{attrs:{hint:"Press ENTER to apply filters and ESC to cancel editing","permanent-hint":"",rows:"1",outlined:"",clearable:"","auto-grow":"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation(),e.preventDefault()},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),t.exitRawMode(!0))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),e.preventDefault(),t.exitRawMode(!1))}]},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1):t.uql.parts.length?a("v-col",{staticClass:"d-flex flex-wrap align-start"},[t._l(t.uql.parts,(function(e,n){return[e.editMode?a("div",{key:e.query,staticClass:"mr-2 d-inline-block"},[a("v-text-field",{attrs:{"error-messages":e.error,outlined:"",dense:"","hide-details":"auto",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation(),e.preventDefault()},keydown:[function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.stopPropagation(),a.preventDefault(),t.uql.exitEditMode(e,!0))},function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:(a.stopPropagation(),a.preventDefault(),t.uql.exitEditMode(e,!1))}],blur:function(a){return t.uql.exitEditMode(e,!0)}},model:{value:e.editQuery,callback:function(a){t.$set(e,"editQuery",a)},expression:"part.editQuery"}})],1):a("div",{key:e.query,staticClass:"mr-2 mb-1 d-inline-block"},[a("v-chip",{attrs:{label:"",color:"grey lighten-4"},on:{click:function(a){return t.uql.enterEditMode(e)}}},[t._t("part",(function(){return[a("span",[t._v(t._s(e.query))]),a("v-icon",{attrs:{right:""},on:{click:function(e){return t.uql.removeAt(n)}}},[t._v("mdi-close")])]}),{part:e})],2),e.error?a("div",{staticClass:"text-caption text-no-wrap red--text text--darken-2"},[t._v(" "+t._s(e.error)+" ")]):t._e()],1)]}))],2):a("v-col",{staticClass:"mb-1 px-3 text-body-2 grey--text text--darken-2"},[t._v(" Empty query... ")])],1)],1)},pr=[],vr=Object(r["defineComponent"])({name:"UptraceQuery",props:{uql:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])("");function a(a){t.uql.rawMode=!1,a&&(t.uql.query=e.value)}return Object(r["watch"])((function(){return t.uql.query}),(function(t){e.value=t}),{immediate:!0}),{query:e,exitRawMode:a}}}),mr=vr,fr=(a("1932"),a("8784"),a("c0ee")),br=a("1d82"),hr=Object(h["a"])(mr,dr,pr,!1,null,"24e092da",null),gr=hr.exports;y()(hr,{VBtn:L["a"],VChip:fr["a"],VCol:X["a"],VIcon:U["a"],VRow:W["a"],VTextField:Z["a"],VTextarea:br["a"]});var yr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"frag",rawName:"v-frag"}]},[a("SearchFilterMenu",{attrs:{uql:t.uql}}),a("DurationFilterMenu",{attrs:{uql:t.uql}}),a("AttrFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams,"attr-key":t.xkey.spanStatusCode,label:"Status"}}),a("AttrFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams,"attr-key":t.xkey.spanKind,label:"Kind"}}),a("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),a("WhereFilterMenu",{attrs:{systems:t.systems,uql:t.uql,"axios-params":t.axiosParams}}),a("AggFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams}}),a("GroupByMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams}}),[a("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),a("v-btn",{staticClass:"v-btn--filter",attrs:{text:""},on:{click:t.reset}},[t._v("Reset")])]],2)},xr=[],Or=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Search")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}}},[a("v-card",{attrs:{width:"400"}},[a("v-card-text",{staticClass:"pa-6"},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Contains substr1|substr2|substr3",hint:'Case-insensitive options separated with "|"',"persistent-hint":"",filled:"",dense:"",autofocus:""},model:{value:t.attrValue,callback:function(e){t.attrValue=e},expression:"attrValue"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:!t.attrValue.length}},[t._v("Filter")])],1)],1)],1)],1)],1)],1)},_r=[],jr=Object(r["defineComponent"])({name:"SearchFilterMenu",props:{uql:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])("");function n(){var n=ja(a.value),r=t.uql.createEditor();r.add("where ".concat(fa.spanName," contains ").concat(n)),t.uql.commitEdits(r),e.value=!1}return{xkey:fa,menu:e,attrValue:a,addFilter:n}}}),Cr=jr,wr=(a("4a99"),a("b148")),kr=Object(h["a"])(Cr,Or,_r,!1,null,"75636ea2",null),Sr=kr.exports;y()(kr,{VBtn:L["a"],VCard:ce["a"],VCardText:le["b"],VCol:X["a"],VForm:wr["a"],VIcon:U["a"],VMenu:ye["a"],VRow:W["a"],VSpacer:z["a"],VTextField:Z["a"]});var Vr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Dur.")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}}},[a("v-card",{attrs:{width:"360px"}},[a("v-card-text",{staticClass:"py-6"},[a("v-row",{staticClass:"mb-n4",attrs:{align:"center"}},[a("v-col",[a("v-text-field",{attrs:{type:"number",min:"0",label:">= duration",suffix:"ms",outlined:"",dense:"",autofocus:"","hide-details":"auto"},model:{value:t.gte,callback:function(e){t.gte=e},expression:"gte"}})],1),a("v-col",{staticClass:"px-0",attrs:{cols:"auto"}},[t._v("AND")]),a("v-col",[a("v-text-field",{attrs:{type:"number",min:t.gte+1,label:"< duration",suffix:"ms",outlined:"",dense:"","hide-details":"auto"},model:{value:t.lt,callback:function(e){t.lt=e},expression:"lt"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{attrs:{type:"submit",color:"primary",disabled:!t.isValid}},[t._v("Filter")])],1)],1)],1)],1)],1)],1)},qr=[],Pr=Object(r["defineComponent"])({name:"DurationFilterMenu",props:{uql:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["computed"])((function(){return a.value||n.value}));function s(){if(o.value){var r=t.uql.createEditor();a.value&&r.replaceOrPush(/^where\s+span\.duration\s+>=\s.+$/i,"where ".concat(fa.spanDuration," >= ").concat(a.value,"ms")),n.value&&r.replaceOrPush(/^where\s+span\.duration\s+<\s.+$/i,"where ".concat(fa.spanDuration," < ").concat(n.value,"ms")),t.uql.commitEdits(r),e.value=!1,a.value=void 0,n.value=void 0}else e.value=!1}return{menu:e,gte:a,lt:n,isValid:o,addFilter:s}}}),Tr=Pr,Rr=Object(h["a"])(Tr,Vr,qr,!1,null,"2ccaf884",null),Ir=Rr.exports;y()(Rr,{VBtn:L["a"],VCard:ce["a"],VCardText:le["b"],VCol:X["a"],VForm:wr["a"],VIcon:U["a"],VMenu:ye["a"],VRow:W["a"],VSpacer:z["a"],VTextField:Z["a"]});var Er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v(t._s(t.label))]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("XList",{attrs:{loading:t.suggestions.loading,items:t.suggestions.filteredItems,"num-item":t.suggestions.items.length,"search-input":t.suggestions.searchInput,"return-object":""},on:{"update:searchInput":function(e){return t.$set(t.suggestions,"searchInput",e)},"update:search-input":function(e){return t.$set(t.suggestions,"searchInput",e)},input:function(e){return t.addFilter(e.text,"=")}},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-list-item-content",[a("v-list-item-title",[t._v(" "+t._s(t.truncate(n.text,{length:60}))+" ")])],1),a("v-list-item-action",{staticClass:"my-0",on:{click:function(e){return e.stopPropagation(),t.addFilter(n.text,"!=")}}},[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-not-equal")])],1)],1)]}}])})],1)},Dr=[];function Lr(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r["shallowRef"])(""),o=null!==(e=a.suggestSearchInput)&&void 0!==e&&e,s=At((function(){return t()})),i=s.loading,u=s.data,c=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=u.value)||void 0===e?void 0:e.suggestions)&&void 0!==t?t:[]})),l=Object(r["computed"])((function(){var t=c.value.slice();if(!n.value)return t;if(t=t.filter((function(t){return t.text.indexOf(n.value)>=0})),o){var e={text:n.value};t.length<=5?t.push(e):t.unshift(e)}return t}));return Object(r["proxyRefs"])({searchInput:n,loading:i,data:u,items:c,filteredItems:l})}var Mr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{attrs:{"max-height":"320",loading:t.loading}},[a("XPlaceholder",{scopedSlots:t._u([t.loading?{key:"placeholder",fn:function(){return[a("v-skeleton-loader",{attrs:{width:"200",type:"list-item@3",loading:""}})]},proxy:!0}:t.items.length?null:{key:"placeholder",fn:function(){return[a("v-card-text",[t._v("There are no any suggestions.")])]},proxy:!0}],null,!0)},[t.showFilter?a("v-card-text",{staticClass:"mb-n2"},[a("v-text-field",{attrs:{placeholder:"Filter",outlined:"",dense:"","hide-details":"auto",autofocus:"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1):t._e(),a("v-list",{attrs:{dense:""}},t._l(t.filteredItems,(function(e){return a("v-list-item",{key:e.value,on:{click:function(a){return t.onClick(e)}}},[t._t("item",(function(){return[a("v-list-item-content",[a("v-list-item-title",{staticStyle:{"text-overflow":"clip"}},[t._v(" "+t._s(t.truncate(e.text,{length:80}))+" ")])],1)]}),{item:e})],2)})),1)],1)],1)},Nr=[],$r=Object(r["defineComponent"])({name:"XList",props:{loading:{type:Boolean,default:!1},items:{type:Array,required:!0},numItem:{type:Number,default:void 0},searchInput:{type:String,default:""},returnObject:{type:Boolean,default:!1}},setup:function(t,e){var a=Object(r["shallowRef"])(""),n=Object(r["computed"])((function(){return t.items.map((function(t){return"string"===typeof t?{text:t,value:t}:t}))})),o=Object(r["computed"])((function(){var t=n.value.slice();return a.value?t.filter((function(t){return t.text.indexOf(a.value)>=0})):t})),s=Object(r["computed"])((function(){return t.numItem?t.numItem>10:t.items.length>10}));function i(a){t.returnObject?e.emit("input",a):e.emit("input",a.value)}return Object(r["watch"])((function(){return t.searchInput}),(function(t){a.value=t}),{immediate:!0}),Object(r["watch"])(a,(function(t){e.emit("update:searchInput",t)})),{search:a,filteredItems:o,showFilter:s,onClick:i,truncate:u["truncate"]}}}),Br=$r,Ar=a("712d"),Fr=Object(h["a"])(Br,Mr,Nr,!1,null,"bea19ccc",null),Gr=Fr.exports;y()(Fr,{VCardText:le["b"],VList:ee["a"],VListItem:ae["a"],VListItemContent:ne["b"],VListItemTitle:ne["c"],VSheet:rn["a"],VSkeletonLoader:Ar["a"],VTextField:Z["a"]});var Xr=Object(r["defineComponent"])({name:"AttrFilterMenu",components:{XList:Gr},props:{uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0},attrKey:{type:String,required:!0},label:{type:String,required:!0}},setup:function(t,e){var a=Object(r["shallowRef"])(!1),n=Lr((function(){return a.value?{url:"/api/tracing/suggestions/values",params:Object(ot["a"])(Object(ot["a"])({},t.axiosParams),{},{column:t.attrKey})}:null}));function o(n,r){var o=t.uql.createEditor();o.where(t.attrKey,r,n),t.uql.commitEdits(o),a.value=!1,e.emit("change")}return{menu:a,suggestions:n,addFilter:o,truncate:u["truncate"]}}}),Hr=Xr,Ur=a("0a8a"),Qr=Object(h["a"])(Hr,Er,Dr,!1,null,"0807ed0e",null),Wr=Qr.exports;y()(Qr,{VBtn:L["a"],VIcon:U["a"],VListItemAction:Ur["a"],VListItemContent:ne["b"],VListItemTitle:ne["c"],VMenu:ye["a"]});var zr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Where")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-card",{staticClass:"pa-3"},[a("v-row",[a("v-col",{attrs:{cols:"auto"}},[a("v-form",{ref:"form",staticClass:"pa-3",staticStyle:{width:"400px"},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("v-row",[a("v-col",{staticClass:"grey--text text--darken-3"},[t._v("For example, "),a("strong",[t._v("where span.duration > 100ms")]),t._v(".")])],1),a("v-row",{staticClass:"mb-n3"},[a("v-col",{staticClass:"pt-4 pr-2",attrs:{cols:"auto"}},[a("v-avatar",{attrs:{color:"grey",size:"30"}},[a("span",{staticClass:"white--text text-h6"},[t._v("1")])])],1),a("v-col",[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.columnSuggestions.loading,suggestions:t.columnSuggestions,rules:t.rules.column,label:"Column",dense:""},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}})],1)],1),a("v-row",{staticClass:"mb-n3"},[a("v-col",{staticClass:"pt-4 pr-2",attrs:{cols:"auto"}},[a("v-avatar",{attrs:{color:"grey",size:"30"}},[a("span",{staticClass:"white--text text-h6"},[t._v("2")])])],1),a("v-col",[a("v-autocomplete",{staticClass:"fit",staticStyle:{width:"200px"},attrs:{rules:t.rules.op,label:"Operator",items:t.opItems,outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.op,callback:function(e){t.op=e},expression:"op"}})],1)],1),a("v-row",[a("v-col",{staticClass:"pt-4 pr-2",attrs:{cols:"auto"}},[a("v-avatar",{attrs:{color:"grey",size:"30"}},[a("span",{staticClass:"white--text text-h6"},[t._v("3")])])],1),a("v-col",[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.valueSuggestions.loading,suggestions:t.valueSuggestions,rules:t.rules.colValue,label:"Value",placeholder:t.valuePlaceholder,hint:t.valueHint,disabled:t.valueDisabled,dense:""},model:{value:t.colValue,callback:function(e){t.colValue=e},expression:"colValue"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{disabled:!t.isValid},on:{click:t.addFilter}},[t._v("Filter")])],1)],1)],1)],1),t.lcAttrs.length?[a("v-col",{attrs:{cols:"auto"}},[a("v-divider",{attrs:{vertical:""}})],1),a("v-col",{staticClass:"pa-4",attrs:{cols:"auto"}},t._l(t.lcAttrs,(function(e){return a("div",{key:e},[a("AttrFilterMenu",{attrs:{uql:t.uql,"axios-params":t.axiosParams,"attr-key":e,label:e},on:{change:function(e){t.menu=!1}}})],1)})),0)]:t._e()],2)],1)],1)},Kr=[],Jr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-combobox",t._b({staticClass:"pt-0",attrs:{value:t.value,"persistent-hint":"",loading:t.loading,items:t.suggestions.filteredItems,"search-input":t.suggestions.searchInput,"return-object":"","no-filter":"","auto-select-first":"",clearable:"",outlined:"","hide-details":"auto"},on:{"update:searchInput":function(e){return t.$set(t.suggestions,"searchInput",e)},"update:search-input":function(e){return t.$set(t.suggestions,"searchInput",e)},input:t.onInput},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.truncate(n.text,{length:60})))])],1),n.hint?a("v-list-item-action",[a("v-list-item-action-text",[t._v(t._s(n.hint))])],1):t._e()]}}])},"v-combobox",t.$attrs,!1))},Zr=[],Yr=Object(r["defineComponent"])({name:"SimpleSuggestions",props:{loading:{type:Boolean,default:!1},value:{type:Object,default:void 0},suggestions:{type:Object,required:!0}},setup:function(t,e){var a=e.emit;function n(t){"string"===typeof t&&(t={text:t}),a("input",t)}return{onInput:n,truncate:u["truncate"]}}}),to=Yr,eo=a("0c1c"),ao=Object(h["a"])(to,Jr,Zr,!1,null,"a5dbcd36",null),no=ao.exports;y()(ao,{VCombobox:eo["a"],VListItemAction:Ur["a"],VListItemActionText:ne["a"],VListItemContent:ne["b"],VListItemTitle:ne["c"]});var ro=function(t){return t&&0!=t.length||"Field is required"};var oo={contains:"contains",doesNotContain:"does not contain",like:"like",notLike:"not like",exists:"exists",doesNotExist:"does not exist"},so=Object(r["defineComponent"])({name:"WhereFilterMenu",components:{AttrFilterMenu:Wr,SimpleSuggestions:no},props:{systems:{type:Object,required:!0},uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(""),o=Object(r["shallowRef"])(),s=Object(r["shallowRef"])(),i=Object(r["shallowRef"])(!1),u={column:[ro],op:[ro],colValue:[]},c=Lr((function(){return e.value?{url:"/api/tracing/suggestions/attributes",params:t.axiosParams}:null}),{suggestSearchInput:!0}),l=Object(r["computed"])((function(){var t=[fa.serviceName,fa.hostName,fa.codeFilepath,fa.codeFunction,fa.rpcMethod,fa.httpMethod,fa.httpStatusCode];return c.items.filter((function(e){return t.indexOf(e.text)>=0})).map((function(t){return t.text})).sort((function(e,a){return t.indexOf(e)-t.indexOf(a)}))})),d=Object(r["computed"])((function(){return["=","!=","<","<=",">",">=",oo.contains,oo.doesNotContain,oo.like,oo.notLike,oo.exists,oo.doesNotExist]})),p=Lr((function(){if(e.value&&a.value&&a.value.text)return{url:"/api/tracing/suggestions/values",params:Object(ot["a"])(Object(ot["a"])({},t.axiosParams),{},{column:a.value.text})}}),{suggestSearchInput:!0}),v=Object(r["computed"])((function(){switch(n.value){case oo.like:case oo.notLike:return"%substring% or %suffix or prefix%";case oo.contains:case oo.doesNotContain:return"substr1|substr2|substr3";default:return""}})),m=Object(r["computed"])((function(){switch(n.value){case oo.like:case oo.notLike:return'"%" matches zero or more characters';case oo.contains:case oo.doesNotContain:return'Case-insensitive options separated with "|"';default:return""}})),f=Object(r["computed"])((function(){switch(n.value){case oo.exists:case oo.doesNotExist:return!0;default:return!1}}));function b(){setTimeout((function(){if(a.value&&n.value){var r=t.uql.createEditor();if(f.value)r.add("where ".concat(a.value.text," ").concat(n.value));else{var i,u,c=null!==(i=null===(u=o.value)||void 0===u?void 0:u.text)&&void 0!==i?i:"";r.add("where ".concat(a.value.text," ").concat(n.value," ").concat(ja(c)))}t.uql.commitEdits(r),a.value=void 0,n.value="",o.value=void 0,s.value.resetValidation(),e.value=!1}}),10)}return Object(r["watch"])(f,(function(t){t&&(o.value=void 0)})),{xkey:fa,menu:e,lcAttrs:l,form:s,isValid:i,rules:u,columnSuggestions:c,opItems:d,valueSuggestions:p,valuePlaceholder:v,valueHint:m,valueDisabled:f,column:a,op:n,colValue:o,addFilter:b}}}),io=so,uo=(a("d542"),a("407f")),co=a("e2bd"),lo=a("6d62"),po=Object(h["a"])(io,zr,Kr,!1,null,"68c46dce",null),vo=po.exports;y()(po,{VAutocomplete:uo["a"],VAvatar:co["a"],VBtn:L["a"],VCard:ce["a"],VCol:X["a"],VDivider:lo["a"],VForm:wr["a"],VIcon:U["a"],VMenu:ye["a"],VRow:W["a"],VSpacer:z["a"]});var mo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:""}},"v-btn",r,!1),n),[a("span",[t._v("Agg")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("v-card",{attrs:{width:"400px"}},[a("v-card-text",{staticClass:"py-6 text-body-2"},[a("v-row",[a("v-col",{staticClass:"no-transform space-around"},t._l(t.aggColumns,(function(e){return a("UqlChip",{key:e.name,attrs:{uql:t.uql,column:e.name,tooltip:e.tooltip},on:{click:function(e){t.menu=!1}}})})),1)],1),a("div",{staticClass:"mt-3 mb-4 d-flex align-center"},[a("v-divider"),a("div",{staticClass:"mx-2 grey--text text--lighten-1"},[t._v("or")]),a("v-divider")],1),a("v-row",{staticClass:"mb-n1"},[a("v-col",[t._v(" Select a function and then a column: "),a("strong",[t._v("func(column)")]),t._v(". ")])],1),a("v-row",{staticClass:"mb-n6",attrs:{dense:""}},[a("v-col",{attrs:{cols:5}},[a("v-autocomplete",{staticClass:"fit",attrs:{rules:t.rules.func,label:"Function",items:t.funcItems,"return-object":"",outlined:"",dense:""},model:{value:t.func,callback:function(e){t.func=e},expression:"func"}})],1),a("v-col",{attrs:{cols:7}},[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.suggestions.loading,suggestions:t.suggestions,label:"Column",rules:t.rules.column,disabled:!t.func||t.func.isColumn,dense:""},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:!t.isValid}},[t._v("Add column")])],1)],1)],1)],1)],1)],1)},fo=[],bo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tooltip",{attrs:{disabled:!t.tooltip,top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-chip",t._g(t._b({attrs:{label:"",color:"grey lighten-4"},on:{click:t.apply}},"v-chip",r,!1),n),[t._v(" "+t._s(t.text)+" ")])]}}])},[t._v(" "+t._s(t.tooltip)+" ")])},ho=[],go=Object(r["defineComponent"])({name:"UqlChip",props:{uql:{type:Object,required:!0},column:{type:String,default:""},group:{type:String,default:""},op:{type:String,default:""},value:{type:void 0,default:void 0},query:{type:String,default:""},tooltip:{type:String,default:void 0}},setup:function(t,e){var a=Object(r["computed"])((function(){if(t.group)return t.group;if(t.column){var e=[t.column,t.op];return t.value&&e.push(ja(t.value)),e.join(" ")}return t.query?t.query:""}));function n(){if(e.emit("click"),t.group){var a=t.uql.createEditor();return a.replaceGroupBy(t.group),void t.uql.commitEdits(a)}if(t.column&&!t.op)return o(t.column);if(t.column&&t.op){var n=t.uql.createEditor();return n.where(t.column,t.op,t.value),void t.uql.commitEdits(n)}t.query&&(t.uql.query=t.query)}function o(e){var a=t.uql.createEditor();a.add(e),t.uql.commitEdits(a)}return{text:a,apply:n}}}),yo=go,xo=a("c470"),Oo=Object(h["a"])(yo,bo,ho,!1,null,"3117a298",null),_o=Oo.exports;y()(Oo,{VChip:fr["a"],VTooltip:xo["a"]});var jo=["any","top3","top10","avg","uniq","p50","p75","p90","p95","p99","min","max","sum"],Co=[{name:fa.spanCount,tooltip:"Number of spans in a group"},{name:fa.spanCountPerMin,tooltip:"Number of spans per minute in a group"},{name:fa.spanErrorCount,tooltip:'Number of spans with span.status_code = "error"'},{name:fa.spanErrorPct,tooltip:'Percent of spans with span.status_code = "error"'},{name:"p75(".concat(fa.spanDuration,")"),tooltip:"75th percentile of span.duration"},{name:"max(".concat(fa.spanDuration,")"),tooltip:"Max span.duration"},{name:"uniq(".concat(fa.enduserId,")"),tooltip:"Number of distinct enduser.id"}],wo=Object(r["defineComponent"])({name:"AggFilterMenu",components:{SimpleSuggestions:no,UqlChip:_o},props:{uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["shallowRef"])(),s=Object(r["shallowRef"])(!1),u={func:[ro],column:[v]},c=Lr((function(){var n;return e.value?{url:"/api/tracing/suggestions/attributes",params:Object(ot["a"])(Object(ot["a"])({},t.axiosParams),{},{func:null===(n=a.value)||void 0===n?void 0:n.value})}:null}),{suggestSearchInput:!0}),l=Object(r["computed"])((function(){var t,e=[],a=Object(i["a"])(jo);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.push({value:n,text:n+"(...)"})}}catch(r){a.e(r)}finally{a.f()}return e}));function d(){if(a.value&&n.value){var t="".concat(a.value.value,"(").concat(n.value.text,")");p(t),a.value=void 0,n.value=void 0,o.value.resetValidation()}}function p(a){var n=t.uql.createEditor();n.add(a),t.uql.commitEdits(n),e.value=!1}function v(t){var e=Boolean(a.value&&t);return e||"Column is required"}return{menu:e,form:o,isValid:s,rules:u,suggestions:c,aggColumns:Co,func:a,funcItems:l,column:n,addFilter:d,aggBy:p}}}),ko=wo,So=(a("9e2f"),Object(h["a"])(ko,mo,fo,!1,null,"c1eaaa0a",null)),Vo=So.exports;y()(So,{VAutocomplete:uo["a"],VBtn:L["a"],VCard:ce["a"],VCardText:le["b"],VCol:X["a"],VDivider:lo["a"],VForm:wr["a"],VIcon:U["a"],VMenu:ye["a"],VRow:W["a"],VSpacer:z["a"]});var qo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"v-btn--filter",attrs:{text:"",disabled:t.disabled}},"v-btn",r,!1),n),[a("span",[t._v("Group by")]),a("v-icon",{staticClass:"ml-0",attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.addFilter.apply(null,arguments)}},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[a("v-card",{attrs:{width:"400px"}},[a("v-card-text",{staticClass:"py-6"},[a("v-row",[a("v-col",{staticClass:"space-around no-transform"},t._l(t.groupColumns,(function(e){return a("UqlChip",{key:e,attrs:{uql:t.uql,group:e},on:{click:function(e){t.menu=!1}}})})),1)],1),a("div",{staticClass:"mt-2 mb-3 d-flex align-center"},[a("v-divider"),a("div",{staticClass:"mx-2 grey--text text--lighten-1"},[t._v("or")]),a("v-divider")],1),a("v-row",{staticClass:"mb-n1"},[a("v-col",[t._v("Select a grouping column.")])],1),a("v-row",{attrs:{dense:""}},[a("v-col",[a("SimpleSuggestions",{staticClass:"fit",attrs:{loading:t.suggestions.loading,suggestions:t.suggestions,rules:t.rules.column,label:"Column",dense:""},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}})],1)],1),a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"auto"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:!t.isValid}},[t._v("Group by")])],1)],1)],1)],1)],1)],1)},Po=[],To=[fa.spanGroupId,fa.serviceName,fa.hostName],Ro=Object(r["defineComponent"])({name:"GroupByMenu",components:{SimpleSuggestions:no,UqlChip:_o},props:{uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},setup:function(t){var e=Object(r["shallowRef"])(!1),a=Object(r["shallowRef"])(),n=Object(r["shallowRef"])(),o=Object(r["shallowRef"])(!1),s={column:[ro]},i=Lr((function(){return e.value?{url:"/api/tracing/suggestions/attributes",params:t.axiosParams}:null}),{suggestSearchInput:!0});function u(){a.value&&(c(a.value.text),a.value=void 0,n.value.resetValidation())}function c(a){var n=t.uql.createEditor();n.replaceGroupBy(a),t.uql.commitEdits(n),e.value=!1}return{menu:e,form:n,isValid:o,rules:s,suggestions:i,groupColumns:To,column:a,addFilter:u}}}),Io=Ro,Eo=(a("5fb7"),Object(h["a"])(Io,qo,Po,!1,null,"12a3e2a4",null)),Do=Eo.exports;y()(Eo,{VBtn:L["a"],VCard:ce["a"],VCardText:le["b"],VCol:X["a"],VDivider:lo["a"],VForm:wr["a"],VIcon:U["a"],VMenu:ye["a"],VRow:W["a"],VSpacer:z["a"]});var Lo=Object(r["defineComponent"])({name:"SpanFilters",components:{SearchFilterMenu:Sr,DurationFilterMenu:Ir,AttrFilterMenu:Wr,WhereFilterMenu:vo,AggFilterMenu:Vo,GroupByMenu:Do},props:{uql:{type:Object,required:!0},systems:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){function e(){var e=t.uql.createEditor();e.reset(),t.uql.commitEdits(e)}return{xkey:fa,reset:e}}}),Mo=Lo,No=(a("1737"),Object(h["a"])(Mo,yr,xr,!1,null,"57693a02",null)),$o=No.exports;y()(No,{VBtn:L["a"],VDivider:lo["a"]});var Bo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",[a("v-card",{staticClass:"mb-4",attrs:{rounded:"lg",outlined:""}},[a("v-toolbar",{attrs:{flat:"",color:"light-blue lighten-5"}},[a("v-toolbar-title",[a("span",[t._v("Groups")])]),a("v-spacer"),a("div",{staticClass:"text-body-2 blue-grey--text text--darken-3"},[a("strong",[a("XNum",{attrs:{value:t.explore.pager.numItem,verbose:""}})],1),t._v(" groups ")])],1),a("v-card-text",[a("v-slide-group",{staticClass:"mb-4",attrs:{multiple:"","center-active":"","show-arrows":""},model:{value:t.activeColumns,callback:function(e){t.activeColumns=e},expression:"activeColumns"}},t._l(t.explore.plotColumns,(function(e,n){return a("v-slide-item",{key:e.name,attrs:{value:e.name},scopedSlots:t._u([{key:"default",fn:function(r){var o=r.active,s=r.toggle;return[a("v-btn",{class:{"ml-1":n>0},staticStyle:{"text-transform":"none"},attrs:{"input-value":o,"active-class":"blue white--text",small:"",depressed:"",rounded:""},on:{click:s}},[t._v(" "+t._s(e.name)+" ")])]}}],null,!0)})})),1),a("GroupTable",{attrs:{"date-range":t.dateRange,systems:t.systems,uql:t.uql,loading:t.explore.loading,items:t.explore.pageItems,columns:t.explore.columns,"group-columns":t.explore.groupColumns,"plot-columns":t.activeColumns,order:t.explore.order,"axios-params":t.axiosParams}})],1)],1),a("XPagination",{attrs:{pager:t.explore.pager}})],1)],1)},Ao=[];function Fo(t){var e,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Ra(null!==(e=n.pager)&&void 0!==e?e:{perPage:9}),s=Ia(null!==(a=n.order)&&void 0!==a?a:{column:fa.spanCountPerMin,desc:!0}),i=Object(r["computed"])((function(){return t()})),c=At((function(){return t()})),l=c.loading,d=c.data,p=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=d.value)||void 0===e?void 0:e.groups)&&void 0!==t?t:[]})),v=Object(r["computed"])((function(){if(!s.column)return p.value;var t=Go(s.column);return Object(u["orderBy"])(p.value,(function(e){var a=e[s.column];return t?new Date(a):a}),s.desc?"desc":"asc")})),m=Object(r["computed"])((function(){var t=v.value.slice(o.pos.start,o.pos.end);return t})),f=Object(r["computed"])((function(){var t;return null===(t=d.value)||void 0===t?void 0:t.queryParts})),b=Object(r["computed"])((function(){var t,e,a=null!==(t=null===(e=d.value)||void 0===e?void 0:e.columns)&&void 0!==t?t:[];return a})),h=Object(r["computed"])((function(){return b.value.filter((function(t){return t.isGroup}))})),g=Object(r["computed"])((function(){return b.value.filter((function(t){return t.isNum}))}));return Object(r["watch"])(p,(function(t){o.numItem=t.length}),{immediate:!0,flush:"pre"}),Object(r["proxyRefs"])({pager:o,order:s,axiosReq:i,loading:l,items:v,pageItems:m,queryParts:f,columns:b,groupColumns:h,plotColumns:g})}function Go(t){return t===fa.spanTime||Xo(t,"time")||Xo(t,"date")}function Xo(t,e){return t.endsWith("."+e)||t.endsWith("_"+e)}var Ho=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"v-data-table--narrow",attrs:{dense:t.dense}},[a("colgroup",[t.hasGroupName?a("col",{staticClass:"target"}):t._e(),t.showSystemColumn?a("col"):t._e(),t._l(t.customColumns,(function(t){return a("col",{key:t.name})})),a("col")],2),t.items.length?a("thead",{staticClass:"v-data-table-header"},[a("tr",[t.hasGroupName?a("th",{staticClass:"target text-no-wrap"},[a("span",[t._v("Group Name")])]):t._e(),t.showSystemColumn?a("ThOrder",{attrs:{value:t.xkey.spanSystem,order:t.order}},[t._v("System")]):t._e(),t._l(t.customColumns,(function(e){return a("ThOrder",{key:e.name,attrs:{value:e.name,order:t.order,align:e.isNum?"center":"start"}},[a("span",[t._v(t._s(t.columnHeader(e)))])])})),t.hasTimeColumn?a("ThOrder",{attrs:{value:"max("+t.xkey.spanTime+")",order:t.order}},[t._v(" Time ")]):t._e(),a("th")],2)]):t._e(),a("thead",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[a("tr",{staticClass:"v-data-table__progress"},[a("th",{staticClass:"column",attrs:{colspan:"99"}},[a("v-progress-linear",{attrs:{height:"2",absolute:"",indeterminate:""}})],1)])]),t.items.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no matching groups.")])])]),a("tbody",[t._l(t.items,(function(e,n){return[a("tr",{key:n,staticClass:"cursor-pointer",on:{click:function(e){return t.groupViewer.toggle(n)}}},[t.hasGroupName?a("td",{staticClass:"target"},[a("span",[t._v(t._s(t.truncate(e[t.xkey.spanName],{length:100})))])]):t._e(),t.showSystemColumn?a("td",[a("router-link",{attrs:{to:t.systemRoute(e)},nativeOn:{click:function(t){t.stopPropagation()}}},[t._v(t._s(e[t.xkey.spanSystem]))])],1):t._e(),t._l(t.customColumns,(function(n){return a("td",{key:n.name},[n.isNum?a("div",{staticClass:"d-flex align-center justify-center"},[t.plotColumns.indexOf(n.name)>=0?a("LoadGroupSparkline",{staticClass:"mr-2",attrs:{"axios-params":t.axiosParams,where:t.groupBasedWhere(e),column:n.name}}):t._e(),a("XNum",{attrs:{value:e[n.name],name:n.name}})],1):a("span",[t._v(t._s(e[n.name]))])])})),t.hasTimeColumn?a("td",{staticClass:"text-no-wrap"},[t._t("time",(function(){return[a("XDate",{attrs:{date:e["max("+t.xkey.spanTime+")"],format:"relative"}})]}),{item:e})],2):t._e(),a("td",{staticClass:"text-center text-no-wrap"},[a("v-btn",{attrs:{icon:"",title:"Focus on this group",to:t.spanListRoute(e),exact:""},nativeOn:{click:function(t){t.stopPropagation()}}},[a("v-icon",[t._v("mdi-filter-variant")])],1),t.groupViewer.visible(n)?a("v-btn",{attrs:{icon:"",title:"Hide spans"},on:{click:function(e){return e.stopPropagation(),t.groupViewer.hide(n)}}},[a("v-icon",{attrs:{size:"30"}},[t._v("mdi-chevron-up")])],1):a("v-btn",{attrs:{icon:"",title:"View spans"},on:{click:function(e){return e.stopPropagation(),t.groupViewer.show(n)}}},[a("v-icon",{attrs:{size:"30"}},[t._v("mdi-chevron-down")])],1)],1)],2),t.groupViewer.visible(n)?a("tr",{key:n+"-spans",staticClass:"v-data-table__expanded v-data-table__expanded__content"},[a("td",{staticClass:"px-6 pt-3 pb-4",attrs:{colspan:"99"}},[a("SpanListInline",{attrs:{"date-range":t.dateRange,systems:t.systems,uql:t.uql,"axios-params":t.axiosParams,where:t.groupBasedWhere(e)}})],1)]):t._e()]}))],2)])],1)},Uo=[],Qo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("SparklineChart",{attrs:{name:t.column,line:t.line,time:t.time}})},Wo=[],zo=Object(r["defineComponent"])({name:"LoadGroupSparkline",components:{SparklineChart:Rn},props:{axiosParams:{type:Object,required:!0},where:{type:String,required:!0},column:{type:String,required:!0}},setup:function(t){var e=At((function(){var e=t.where+" | "+t.axiosParams.query;return{url:"/api/tracing/stats",params:Object(ot["a"])(Object(ot["a"])({},t.axiosParams),{},{query:e,column:t.column})}})),a=e.data,n=Object(r["computed"])((function(){var e;return a.value&&null!==(e=a.value[t.column])&&void 0!==e?e:[]})),o=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=a.value)||void 0===e?void 0:e.time)&&void 0!==t?t:[]}));return{line:n,time:o}}}),Ko=zo,Jo=Object(h["a"])(Ko,Qo,Wo,!1,null,null,null),Zo=Jo.exports,Yo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("SpanTable",t._g({staticClass:"mb-4",attrs:{"date-range":t.dateRange,loading:t.spans.loading,spans:t.spans.items,order:t.spans.order,pager:t.spans.pager}},t.listeners)),a("XPagination",{attrs:{pager:t.spans.pager}})],1)},ts=[];function es(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Ra(e.pager),n=Ia(e.order),o=At((function(){var e=t();return e?(e.params=Object(ot["a"])(Object(ot["a"])(Object(ot["a"])({},e.params),n.axiosParams),a.axiosParams()),e):e})),s=o.loading,i=o.data,u=Object(r["computed"])((function(){var t,e,a=null!==(t=null===(e=i.value)||void 0===e?void 0:e.spans)&&void 0!==t?t:[];return a})),c=Object(r["computed"])((function(){var t;return null===(t=i.value)||void 0===t?void 0:t.queryParts}));return Object(r["watch"])(i,(function(t){var e;a.numItem=null!==(e=null===t||void 0===t?void 0:t.count)&&void 0!==e?e:0}),{immediate:!0,flush:"sync"}),Object(r["proxyRefs"])({pager:a,order:n,loading:s,items:u,queryParts:c})}var as=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"table-truncate-first"},[a("colgroup",[a("col"),a("col"),t._l(t.columns,(function(t){return a("col",{key:t})})),a("col"),a("col")],2),a("thead",{staticClass:"v-data-table-header"},[a("tr",[a("th",[t._v("Span Name")]),a("th"),t._l(t.columns,(function(e){return a("ThOrder",{key:e,attrs:{value:e,order:t.order}},[a("span",[t._v(t._s(e))])])})),a("ThOrder",{attrs:{value:"span.time",order:t.order}},[t._v("Time")]),a("ThOrder",{attrs:{value:"span.duration",order:t.order,align:"end"}},[a("span",[t._v("Dur.")])])],2)]),t.loading?a("thead",[a("tr",{staticClass:"v-data-table__progress"},[a("th",{staticClass:"column",attrs:{colspan:"99"}},[a("v-progress-linear",{attrs:{height:"2",absolute:"",indeterminate:""}})],1)])]):t._e(),t.spans.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no spans for the selected date range and filters.")])])]),a("tbody",[t._l(t.spans,(function(e){return[a("tr",{key:"a-"+e.id,staticClass:"cursor-pointer",on:{click:function(a){return t.dialog.showSpan(e)}}},[a("td",[a("span",[t._v(t._s(t.truncate(e.name,{length:100})))])]),a("td",[a("SpanChips",{attrs:{attrs:e.attrs,clickable:"click:chip"in t.$listeners},on:{"click:chip":function(e){return t.$emit("click:chip",e)}}})],1),a("td",[a("XDate",{attrs:{date:e.time,format:"relative"}})],1),a("td",{staticClass:"text-right"},[a("XDuration",{attrs:{duration:e.duration,fixed:""}})],1)])]}))],2)]),a("v-dialog",{attrs:{"max-width":"1280"},model:{value:t.dialog.dialog,callback:function(e){t.$set(t.dialog,"dialog",e)},expression:"dialog.dialog"}},[a("v-sheet",[t.dialog.activeSpan?a("SpanCard",{key:t.dialog.activeSpan[t.xkey.spanId],attrs:{"date-range":t.dateRange,span:t.dialog.activeSpan,fluid:"","show-toolbar":""}}):t._e()],1)],1)],1)},ns=[],rs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("PageToolbar",{attrs:{fluid:t.fluid}},[t.meta.external?a("v-icon",{staticClass:"mr-2"},[t._v("mdi-link-variant")]):t._e(),a("v-breadcrumbs",{attrs:{items:t.meta.breadcrumbs,divider:">",large:""},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-breadcrumbs-item",{attrs:{to:n.to,exact:n.exact}},[t._v(" "+t._s(n.text)+" ")])]}}])})],1),a("v-container",{staticClass:"py-4",attrs:{fluid:t.fluid}},[a("v-row",{staticClass:"px-4 text-body-2"},[a("v-col",[t._v(t._s(t.span.name))])],1),a("v-row",{staticClass:"px-4 text-subtitle-2 text-center",attrs:{align:"end"}},[t.span.kind?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Kind")]),a("div",[t._v(t._s(t.span.kind))])]):t._e(),t.span.statusCode?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Status")]),a("div",{class:{"error--text":"error"===t.span.statusCode}},[t._v(" "+t._s(t.span.statusCode)+" ")])]):t._e(),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Time")]),t.span.time?a("XDate",{attrs:{date:t.span.time,format:"full"}}):t._e()],1),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Duration")]),a("XDuration",{attrs:{duration:t.span.duration,fixed:""}})],1),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"mb-0"},[t.meta.traceRoute?a("v-btn",{attrs:{depressed:"",small:"",to:t.meta.traceRoute,exact:""}},[t._v(" View trace ")]):t._e(),"GroupList"!==t.$route.name?a("v-btn",{staticClass:"ml-2",attrs:{depressed:"",small:"",to:t.meta.groupRoute,exact:""}},[t._v(" View group ")]):t._e()],1)])],1),a("v-row",[a("v-col",[a("v-sheet",{attrs:{outlined:"",rounded:"lg"}},[a("v-tabs",{staticClass:"light-blue lighten-5",attrs:{"background-color":"transparent"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab",{attrs:{href:"#attrs"}},[t._v("Attrs")]),t.dbStmt?a("v-tab",{attrs:{href:"#dbStmt"}},[t._v("SQL")]):t._e(),t.excStacktrace?a("v-tab",{attrs:{href:"#excStacktrace"}},[t._v("Stacktrace")]):t._e(),t.span.events&&t.span.events.length?a("v-tab",{attrs:{href:"#events"}},[t._v(" Events ("+t._s(t.span.events.length)+") ")]):t._e(),t.span.groupId?a("v-tab",{attrs:{href:"#pctile"}},[t._v("Percentiles")]):t._e()],1),a("v-tabs-items",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab-item",{staticClass:"pa-4",attrs:{value:"attrs"}},[a("AttrTable",{attrs:{"date-range":t.dateRange,attrs:t.span.attrs}})],1),a("v-tab-item",{attrs:{value:"dbStmt"}},[a("XCode",{attrs:{code:t.dbStmt,language:"sql"}})],1),a("v-tab-item",{attrs:{value:"excStacktrace"}},[a("XCode",{attrs:{code:t.excStacktrace}})],1),a("v-tab-item",{attrs:{value:"events"}},[a("EventPanels",{attrs:{"date-range":t.dateRange,events:t.span.events}})],1),a("v-tab-item",{staticClass:"pa-4",attrs:{value:"pctile"}},[a("LoadPctileChart",{attrs:{"axios-params":t.axiosParams}})],1)],1)],1)],1)],1)],1)],1)},os=[],ss=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PctileChart",t._b({attrs:{loading:t.percentiles.loading,data:t.percentiles.data}},"PctileChart",t.$attrs,!1))},is=[];function us(t){var e=At(t),a=e.loading,n=e.data,o=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.count)&&void 0!==t?t:0})),s=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.rate)&&void 0!==t?t:0})),i=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.errorCount)&&void 0!==t?t:0})),u=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.p50)&&void 0!==t?t:0})),c=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.p90)&&void 0!==t?t:0})),l=Object(r["computed"])((function(){var t,e;return null!==(t=null===(e=n.value)||void 0===e?void 0:e.max)&&void 0!==t?t:0}));return Object(r["proxyRefs"])({loading:a,data:n,count:o,rate:s,errorCount:i,p50:u,p90:c,max:l})}var cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.charts,(function(e){return a("EChart",{key:e.name,attrs:{loading:t.loading,height:e.height,option:e.option,group:t.chartGroup}})})),1)},ls=[],ds={count:Wa["a"].blue.base,rate:Wa["a"].blue.base,errorCount:Wa["a"].red.darken1,errorPct:Wa["a"].red.darken3,p50:Wa["a"].green.lighten2,p90:Wa["a"].amber.darken1,p99:Wa["a"].amber.darken3},ps=Object(r["defineComponent"])({name:"PctileChart",components:{EChart:sn},props:{loading:{type:Boolean,default:!1},data:{type:Object,default:void 0}},setup:function(t){var e=Object(r["computed"])((function(){var e=[];return t.data&&t.data.p50?(e.push(vs(t.data)),e.push(ms(t.data))):e.push(bs(t.data)),e}));return{charts:e,chartGroup:Symbol()}}});function vs(t){var e=wn();kn(e,{formatter:Sn(_n)}),e.xAxis.push({type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}}}),e.yAxis.push({type:"value",axisLabel:{formatter:_n},axisPointer:{label:{formatter:function(t){return _n(t.value)}}},splitNumber:4,splitLine:{show:!1}}),e.dataset.push({source:t});for(var a=[{name:"p50",color:ds.p50},{name:"p90",color:ds.p90},{name:"p99",color:ds.p99}],n=0,r=a;n<r.length;n++){var o=r[n];t[o.name]&&e.series.push({name:o.name,type:"line",symbol:"none",itemStyle:{color:o.color},areaStyle:{color:new Qa["a"].LinearGradient(0,0,0,1,[{offset:0,color:o.color},{offset:1,color:"#ffe"}])},encode:{x:"time",y:o.name}})}return e.legend.push({type:"scroll",width:"90%",data:["p50","p90","p99"],selected:{p50:!0,p90:!0,p99:!1}}),e.grid.push({top:30,left:45,right:30,height:65}),{name:"pctile",height:100,option:e}}function ms(t){var e=wn();return kn(e,{formatter:Sn((function(t){return String(t)}))}),e.xAxis.push({type:"time",axisPointer:{label:{formatter:function(t){return jt(t.value)}}},splitNumber:5}),e.yAxis.push({type:"value",axisLabel:{},axisPointer:{label:{}},splitNumber:4,splitLine:{show:!1}}),t&&(e.dataset.push({source:{time:t.time,rate:t.rate}}),e.series.push({datasetIndex:e.dataset.length-1,name:"count per min",type:"line",symbol:"none",itemStyle:{color:ds.count},areaStyle:{color:new Qa["a"].LinearGradient(0,0,0,1,[{offset:0,color:ds.count},{offset:1,color:"#ffe"}])},encode:{x:"time",y:"rate"}}),fs(e,t)),e.grid.push({top:15,left:45,right:30,height:60}),{name:"rate",height:100,option:e}}function fs(t,e){t.dataset.push({source:{time:e.time,errorRate:e.errorRate}}),t.series.push({datasetIndex:t.dataset.length-1,name:"errors per min",type:"line",symbol:"none",itemStyle:{color:ds.errorCount},encode:{x:"time",y:"errorRate"}})}function bs(t){var e=wn();return kn(e),e.xAxis.push({type:"time",axisPointer:{label:{formatter:function(t){return jt(t.value)}}},splitNumber:5}),e.yAxis.push({type:"value",splitNumber:4,splitLine:{show:!1}}),t&&(e.dataset.push({source:{time:t.time,rate:t.rate}}),e.series.push({name:"events per min",type:"bar",itemStyle:{color:ds.count},encode:{x:"time",y:"rate"}})),e.grid.push({top:15,left:45,right:30,height:120}),{name:"rate",height:160,option:e}}var hs=ps,gs=Object(h["a"])(hs,cs,ls,!1,null,"495c4c38",null),ys=gs.exports,xs=Object(r["defineComponent"])({name:"LoadPctileChart",components:{PctileChart:ys},props:{axiosParams:{type:Object,required:!0}},setup:function(t){var e=us((function(){return{url:"/api/tracing/percentiles",params:t.axiosParams}}));return{percentiles:e}}}),Os=xs,_s=Object(h["a"])(Os,ss,is,!1,null,"6845ab80",null),js=_s.exports,Cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-simple-table",{staticClass:"v-data-table--border table-scroll-target"},[a("colgroup",[a("col"),a("col")]),a("thead",{staticClass:"v-data-table-header"},[a("tr",[a("th",[t._v("Key")]),a("th",{staticClass:"target"},[t._v("Value")])])]),t.attrKeys.length?t._e():a("tbody",[a("tr",{staticClass:"v-data-table__empty-wrapper"},[a("td",{attrs:{colspan:"99"}},[t._v("There are no attributes matching the filters.")])])]),a("tbody",t._l(t.attrKeys,(function(e){return a("tr",{key:e},[a("th",[t._v(t._s(e))]),a("td",[a("XText",{attrs:{name:e,value:t.attrs[e]}})],1)])})),0)])],1)},ws=[],ks=Object(r["defineComponent"])({name:"AttrTable",props:{attrs:{type:Object,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){var e=Object.keys(t.attrs).filter((function(t){switch(t){case fa.spanId:case fa.spanTraceId:case fa.spanGroupId:case fa.spanSystem:case fa.spanName:case fa.spanKind:case fa.spanTime:case fa.spanDuration:case fa.spanStatusCode:return!1;default:return!0}}));return e.sort(),e}));return{xkey:fa,attrKeys:e}}}),Ss=ks,Vs=Object(h["a"])(Ss,Cs,ws,!1,null,"6dd640d6",null),qs=Vs.exports;y()(Vs,{VSimpleTable:Ln["a"]});var Ps=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-expansion-panels",{attrs:{flat:t.flat,multiple:""},model:{value:t.panels,callback:function(e){t.panels=e},expression:"panels"}},t._l(t.events,(function(e,n){return a("v-expansion-panel",{key:n},[a("v-expansion-panel-header",{staticClass:"user-select-text"},[a("span",[a("XDate",{staticClass:"mr-5 text-caption",attrs:{date:e.time,format:"time"}}),a("span",[t._v(t._s(e.name))])],1)]),a("v-expansion-panel-content",[a("EventPanelContent",{attrs:{"date-range":t.dateRange,event:e}})],1)],1)})),1)},Ts=[],Rs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._e(),a("AttrTable",{staticClass:"mt-4",attrs:{"date-range":t.dateRange,attrs:t.event.attrs}})],1)},Is=[],Es=Object(r["defineComponent"])({name:"EventPanelContent",components:{PctileChart:ys,AttrTable:qs},props:{dateRange:{type:Object,required:!0},event:{type:Object,required:!0}},setup:function(t){var e=us((function(){return{url:"/api/v1/tracing/percentiles",params:Object(ot["a"])({group_id:void 0},t.dateRange.axiosParams())}}));return{percentiles:e}}}),Ds=Es,Ls=Object(h["a"])(Ds,Rs,Is,!1,null,"5ac28304",null),Ms=Ls.exports,Ns=Object(r["defineComponent"])({name:"EventPanels",components:{EventPanelContent:Ms},props:{dateRange:{type:Object,required:!0},events:{type:Array,required:!0},flat:{type:Boolean,default:!1}},setup:function(t,e){var a=e.emit,n=Object(r["ref"])([]);return Object(r["watch"])((function(){return t.events}),(function(t){1===t.length?n.value=[0]:n.value=[]}),{immediate:!0}),{xkey:fa,panels:n,emit:a}}}),$s=Ns,Bs=a("790c"),As=a("285a"),Fs=a("487c"),Gs=a("b682"),Xs=Object(h["a"])($s,Ps,Ts,!1,null,"82d7c456",null),Hs=Xs.exports;y()(Xs,{VExpansionPanel:Bs["a"],VExpansionPanelContent:As["a"],VExpansionPanelHeader:Fs["a"],VExpansionPanels:Gs["a"]});var Us=Object(r["defineComponent"])({name:"SpanCard",components:{AttrTable:qs,EventPanels:Hs,LoadPctileChart:js},props:{dateRange:{type:Object,required:!0},span:{type:Object,required:!0},fluid:{type:Boolean,default:!1}},setup:function(t){var e=Object(r["ref"])("attrs"),a=Object(r["computed"])((function(){return Object(ot["a"])(Object(ot["a"])({},t.dateRange.axiosParams()),{},{system:t.span.system,group_id:t.span.groupId})})),n=Object(r["computed"])((function(){var e;return null!==(e=t.span.attrs[fa.dbStatement])&&void 0!==e?e:""})),o=Object(r["computed"])((function(){var e;return null!==(e=t.span.attrs[fa.exceptionStacktrace])&&void 0!==e?e:""}));return{xkey:fa,meta:Qs(t),activeTab:e,axiosParams:a,dbStmt:n,excStacktrace:o}}});function Qs(t){var e=l(),a=e.route,n=Object(r["computed"])((function(){return t.span.traceId?"TraceShow"===a.value.name&&a.value.params.traceId===t.span.traceId?null:{name:"TraceShow",params:{traceId:t.span.traceId}}:null})),o=Object(r["computed"])((function(){return{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.dateRange.queryParams()),{},{system:t.span.system,where:"".concat(fa.spanGroupId,' = "').concat(t.span.groupId,'"')})}})),s=Object(r["computed"])((function(){var e=[];return e.push({text:t.span.system,to:{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.dateRange.queryParams()),{},{system:t.span.system})},exact:!0}),e.push({text:Object(u["truncate"])(t.span.name,{length:50}),to:{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.dateRange.queryParams()),{},{system:t.span.system,where:"".concat(fa.spanGroupId,' = "').concat(t.span.groupId,'"')})},exact:!0}),t.span.traceId&&e.push({text:t.span.traceId,to:{name:"TraceShow",params:{traceId:t.span.traceId}},exact:!0}),t.span.traceId&&t.span.id&&e.push({text:t.span.id,to:{name:"SpanShow",params:{traceId:t.span.traceId,spanId:t.span.id}},exact:!0}),e}));return Object(r["proxyRefs"])({groupRoute:o,traceRoute:n,breadcrumbs:s})}var Ws=Us,zs=a("252b"),Ks=a("e1db"),Js=Object(h["a"])(Ws,rs,os,!1,null,"c10ec88a",null),Zs=Js.exports;y()(Js,{VBreadcrumbs:zs["a"],VBreadcrumbsItem:Ks["a"],VBtn:L["a"],VCol:X["a"],VContainer:H["a"],VIcon:U["a"],VRow:W["a"],VSheet:rn["a"],VTab:K["a"],VTabItem:pe["a"],VTabs:J["a"],VTabsItems:ve["a"]});var Ys=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",["error"===t.attrs[t.xkey.spanStatusCode]?a("v-btn",{staticClass:"mr-1",class:{"cursor-default":!t.clickable},attrs:{icon:"",title:t.xkey.spanStatusCode+" = 'error'"},on:{click:function(e){return e.stopPropagation(),t.$emit("click:chip",{key:t.xkey.spanStatusCode,value:"error"})}}},[a("v-icon",{attrs:{color:"error"}},[t._v(" mdi-alert-circle-outline ")])],1):t._e(),t._l(t.chips,(function(e,n){return a("v-chip",{key:e.key,class:{"ml-1":n>0,"mb-1":n>0,"cursor-default":!t.clickable},attrs:{color:"light-blue lighten-5",label:"",small:"",title:e.key+": "+e.value},on:{click:function(a){return a.stopPropagation(),t.$emit("click:chip",e)}}},[t._v(" "+t._s(e.text)+" ")])}))],2)},ti=[],ei=Object(r["defineComponent"])({name:"SpanChips",props:{attrs:{type:Object,required:!0},showOperation:{type:Boolean,default:!1},traceMode:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1}},setup:function(t){var e=Object(r["computed"])((function(){if(t.traceMode)return ai(t.attrs);var e=[],a=t.attrs[fa.serviceName];a&&e.push({key:fa.serviceName,value:a,text:a}),ri(e,t.attrs);var n=t.attrs[fa.codeFilepath];return n&&e.push({key:fa.codeFilepath,value:n,text:ii(n)}),oi(e,t.attrs),si(e,t.attrs),e}));return{xkey:fa,chips:e}}});function ai(t){var e=[];return ni(e,t),ri(e,t),oi(e,t),si(e,t),e}function ni(t,e){var a=e[fa.spanSystem];a&&a!==fa.internalSystem&&t.push({key:fa.spanSystem,value:a,text:a})}function ri(t,e){var a=e[fa.spanKind];a&&"internal"!==a&&t.push({key:fa.spanKind,value:a,text:a})}function oi(t,e){var a=e[fa.httpStatusCode];"number"===typeof a&&0!=a&&(a<200||a>=300)&&t.push({key:fa.httpStatusCode,value:a,text:String(a)})}function si(t,e){var a=e[fa.dbSqlTable];a&&t.push({key:fa.dbSqlTable,value:a,text:a})}function ii(t){var e=t.lastIndexOf("/");return-1!==e&&(t=t.slice(e+1)),Object(u["truncate"])(t)}var ui=ei,ci=(a("29e2"),Object(h["a"])(ui,Ys,ti,!1,null,"4fde9b96",null)),li=ci.exports;function di(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.span=t[fa.spanId],{name:"TraceShow",params:{traceId:t[fa.spanTraceId]},query:e}}y()(ci,{VBtn:L["a"],VChip:fr["a"],VIcon:U["a"]});var pi=Object(r["defineComponent"])({name:"SpansTable",components:{ThOrder:Xa,SpanChips:li,SpanCard:Zs},props:{dateRange:{type:Object,required:!0},loading:{type:Boolean,required:!0},spans:{type:Array,required:!0},pager:{type:Object,required:!0},order:{type:Object,required:!0},columns:{type:Array,default:function(){return[]}}},setup:function(t){function e(){Object(r["nextTick"])((function(){t.order.desc=!0}))}return{xkey:fa,dialog:vi(),traceShowRoute:di,truncate:u["truncate"],onSortBy:e}}});function vi(){var t=Object(r["shallowRef"])(!1),e=Object(r["shallowRef"])();function a(a){e.value=a,t.value=!0}return Object(r["proxyRefs"])({dialog:t,activeSpan:e,showSpan:a})}var mi=pi,fi=a("6b3e"),bi=Object(h["a"])(mi,as,ns,!1,null,"746e5f60",null),hi=bi.exports;y()(bi,{VDialog:fi["a"],VProgressLinear:Dn["a"],VSheet:rn["a"],VSimpleTable:Ln["a"]});var gi=Object(r["defineComponent"])({name:"SpanListInline",components:{SpanTable:hi},props:{dateRange:{type:Object,required:!0},uql:{type:Object,default:void 0},axiosParams:{type:Object,required:!0},where:{type:String,required:!0}},setup:function(t){var e=es((function(){var e=t.where+" | "+t.axiosParams.query;return{url:"/api/tracing/spans",params:Object(ot["a"])(Object(ot["a"])({},t.axiosParams),{},{query:e})}}),{order:{column:fa.spanDuration,desc:!0}}),a=Object(r["computed"])((function(){return t.uql?{"click:chip":n}:{}}));function n(e){var a=t.uql.createEditor();a.where(e.key,"=",e.value),t.uql.commitEdits(a)}return{spans:e,listeners:a,onChipClick:n}}}),yi=gi,xi=Object(h["a"])(yi,Yo,ts,!1,null,"4854fd90",null),Oi=xi.exports,_i=(a("2ce0"),Object(r["defineComponent"])({name:"GroupTable",components:{ThOrder:Xa,LoadGroupSparkline:Zo,SpanListInline:Oi},props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},uql:{type:Object,default:void 0},loading:{type:Boolean,required:!0},items:{type:Array,required:!0},columns:{type:Array,required:!0},groupColumns:{type:Array,required:!0},plotColumns:{type:Array,required:!0},order:{type:Object,required:!0},dense:{type:Boolean,default:!1},showDetails:{type:Boolean,default:!1},axiosParams:{type:Object,default:void 0}},setup:function(t){var e=l(),a=e.route,n=Object(r["computed"])((function(){return p(fa.spanName)})),o=Object(r["computed"])((function(){return Boolean(t.showDetails&&t.uql)})),s=Object(r["computed"])((function(){return xa(t.systems.activeValue)&&p(fa.spanSystem)})),c=Object(r["computed"])((function(){return p("max(".concat(fa.spanTime,")"))})),d=Object(r["computed"])((function(){var e=[fa.spanSystem,"max(".concat(fa.spanTime,")")];n.value&&e.push(fa.spanGroupId,fa.spanName);var a=t.columns.filter((function(t){return-1===e.indexOf(t.name)}));return a}));function p(e){if(!t.items.length)return!1;var a=t.items[0];return e in a}function v(e){var n,r=t.uql.createEditor(),o=Object(i["a"])(t.groupColumns);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=e[s.name];r.where(s.name,"=",u)}}catch(c){o.e(c)}finally{o.f()}return{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])(Object(ot["a"])({},a.value.query),t.systems.axiosParams()),{},{query:r.toString()})}}function m(t){switch(t.name){case fa.spanErrorCount:return"Errors";case fa.spanErrorPct:return"Err%"}var e=t.name.match(/^([0-9a-z]+)\(span\.duration\)$/);if(e)return e[1];var a="span.";return t.name.startsWith(a)?t.name.slice(a.length):t.name}function f(e){var a,n=[],r=Object(i["a"])(t.groupColumns);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=e[o.name];n.push("".concat(o.name," = ").concat(ja(s)))}}catch(u){r.e(u)}finally{r.f()}return"where ".concat(n.join(" AND "))}function b(t){return{query:Object(ot["a"])(Object(ot["a"])({},a.value.query),{},{system:t[fa.spanSystem]})}}return{xkey:fa,groupViewer:ji(),hasGroupName:n,hasDetails:o,showSystemColumn:s,hasTimeColumn:c,customColumns:d,columnHeader:m,spanListRoute:v,groupBasedWhere:f,systemRoute:b,truncate:u["truncate"]}}}));function ji(){var t=Object(r["shallowRef"])();function e(e){return t.value===e}function a(t){e(t)?o(t):n(t)}function n(e){t.value=e}function o(e){t.value=void 0}return{visible:e,show:n,hide:o,toggle:a}}var Ci=_i,wi=Object(h["a"])(Ci,Ho,Uo,!1,null,"65d85b10",null),ki=wi.exports;y()(wi,{VBtn:L["a"],VIcon:U["a"],VProgressLinear:Dn["a"],VSimpleTable:Ln["a"]});var Si=Object(r["defineComponent"])({name:"GroupList",components:{GroupTable:ki},props:{dateRange:{type:Object,required:!0},systems:{type:Object,required:!0},uql:{type:Object,required:!0},axiosParams:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])([]),a=Fo((function(){return{url:"/api/tracing/groups",params:t.axiosParams}}));return Object(r["watch"])((function(){return a.plotColumns}),(function(t){t.length&&!e.value.length&&(e.value=[t[0].name])})),Object(r["watch"])((function(){return a.queryParts}),(function(e){e&&t.uql.syncParts(e)})),{activeColumns:e,explore:a}}}),Vi=Si,qi=Object(h["a"])(Vi,Bo,Ao,!1,null,null,null),Pi=qi.exports;y()(qi,{VBtn:L["a"],VCard:ce["a"],VCardText:le["b"],VCol:X["a"],VRow:W["a"],VSlideGroup:An["b"],VSlideItem:Fn["a"],VSpacer:z["a"],VToolbar:Gn["a"],VToolbarTitle:ia["a"]});var Ti=Object(r["defineComponent"])({name:"Tracing",components:{DateRangePicker:Re,SystemPicker:lr,HelpCard:ma,UptraceQuery:gr,SpanFilters:$o,GroupList:Pi},setup:function(){Object(rt["useTitle"])("Explore spans");var t=Rt(),e=Ft(t),a=ka({query:Ta(fa.spanGroupId),syncQuery:!0}),n=Object(r["computed"])((function(){return Object(ot["a"])(Object(ot["a"])(Object(ot["a"])({},t.axiosParams()),a.axiosParams()),{},{system:e.activeValue})}));return{dateRange:t,systems:e,uql:a,axiosParams:n}}}),Ri=Ti,Ii=Object(h["a"])(Ri,Kn,Jn,!1,null,"3d508ff0",null),Ei=Ii.exports;y()(Ii,{VCol:X["a"],VContainer:H["a"],VRow:W["a"]});var Di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XPlaceholder",{scopedSlots:t._u([t.trace.error?{key:"placeholder",fn:function(){return[t.trace.error?a("TraceError",{attrs:{error:t.trace.error}}):t._e()]},proxy:!0}:t.trace.root?null:{key:"placeholder",fn:function(){return[a("v-container",{attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-skeleton-loader",{attrs:{type:"article, image, table"}})],1)]},proxy:!0}],null,!0)},[a("PageToolbar",{attrs:{loading:t.trace.loading,fluid:t.$vuetify.breakpoint.mdAndDown}},[a("v-breadcrumbs",{attrs:{items:t.meta.breadcrumbs,divider:">",large:""},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-breadcrumbs-item",{attrs:{to:n.to,exact:n.exact}},[t._v(" "+t._s(n.text)+" ")])]}}])})],1),a("v-container",{staticClass:"py-4",attrs:{fluid:t.$vuetify.breakpoint.mdAndDown}},[t.trace.root?a("v-row",{staticClass:"px-4 text-body-2"},[a("v-col",[t._v(" "+t._s(t.trace.root.name)+" ")])],1):t._e(),t.trace.root?a("v-row",{staticClass:"px-4 text-subtitle-2 text-center",attrs:{align:"end"}},[t.trace.root.kind?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Kind")]),a("div",[t._v(t._s(t.trace.root.kind))])]):t._e(),t.trace.root.statusCode?a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Status")]),a("div",{class:{"error--text":"error"===t.trace.root.statusCode}},[t._v(" "+t._s(t.trace.root.statusCode)+" ")])]):t._e(),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Time")]),a("XDate",{attrs:{date:t.trace.root.time,format:"full"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("div",{staticClass:"grey--text font-weight-regular"},[t._v("Duration")]),a("XDuration",{attrs:{duration:t.trace.root.duration,fixed:""}})],1),a("v-col",{attrs:{cols:"auto"}},[t.groupRoute?a("v-btn",{attrs:{depressed:"",small:"",to:t.groupRoute,exact:""}},[t._v("View group")]):t._e()],1),a("v-col",{attrs:{cols:"auto"}},[t.exploreTraceRoute?a("v-btn",{attrs:{depressed:"",small:"",to:t.exploreTraceRoute,exact:""}},[t._v("Explore trace")]):t._e()],1)],1):t._e(),t.trace.root&&t.trace.root.groupId?a("v-row",[a("v-col",[a("v-card",{attrs:{outlined:"",rounded:"lg"}},[a("v-card-text",[a("LoadPctileChart",{attrs:{"axios-params":t.axiosParams}})],1)],1)],1)],1):t._e(),a("v-row",[a("v-col",[a("SystemBarChart",{attrs:{systems:t.trace.coloredSystems}})],1)],1),a("v-row",[a("v-col",[a("v-sheet",{staticClass:"pa-4",attrs:{outlined:"",rounded:"lg"}},[a("TraceTimeline",{attrs:{"date-range":t.dateRange,trace:t.trace}})],1)],1)],1)],1)],1)},Li=[],Mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-sheet",{attrs:{outlined:"",rounded:"t-lg"}},[a("v-row",t._l(t.styledSystems,(function(e){return a("v-col",{key:e.system,staticClass:"py-5 text-center text-subtitle-2",attrs:{justify:"space-around"}},[a("v-avatar",{staticClass:"mr-2",attrs:{color:e.color.base,size:"12"}}),a("span",{staticClass:"d-inline-flex mr-1"},[t._v(t._s(t.truncate(e.system,{length:30})))]),a("span",{staticClass:"d-inline-flex blue-grey--text"},[t._v(t._s(t.percent(e.duration/t.totalDuration)))])],1)})),1)],1),a("div",{staticClass:"d-flex"},t._l(t.styledSystems,(function(e){return a("v-tooltip",{key:e.system,attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on;return[a("div",t._g({staticClass:"bar",style:e.barStyle},r))]}}],null,!0)},[a("div",[a("span",[t._v(t._s(e.system))]),a("XDuration",{staticClass:"ml-1",attrs:{duration:e.duration}})],1)])})),1),a("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{indeterminate:"",absolute:""}})],1)},Ni=[],$i=Object(r["defineComponent"])({name:"SystemBarChart",props:{loading:{type:Boolean,default:!1},systems:{type:Array,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){return t.systems.reduce((function(t,e){return e.duration?t+e.duration:t}),0)})),a=Object(r["computed"])((function(){var a,n=t.systems.slice(0,5),r=Object(i["a"])(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.barStyle={width:Bi(o.duration,e.value),"background-color":o.color.base}}}catch(s){r.e(s)}finally{r.f()}return n}));return{styledSystems:a,totalDuration:e,truncate:u["truncate"],percent:gn}}});function Bi(t,e){if(0===e)return"100%";var a=t/e*100;return a+"%"}var Ai=$i,Fi=(a("e4c5"),Object(h["a"])(Ai,Mi,Ni,!1,null,"67799368",null)),Gi=Fi.exports;y()(Fi,{VAvatar:co["a"],VCol:X["a"],VProgressLinear:Dn["a"],VRow:W["a"],VSheet:rn["a"],VTooltip:xo["a"]});var Xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"trace-table trace-table--timeline"},[t._m(0),t._m(1),a("tbody",[t._l(t.trace.spans,(function(e){return[t.trace.isVisible(e)?a("tr",{key:"span-"+e.id,staticClass:"cursor-pointer",class:{active:e===t.trace.activeSpan},attrs:{id:"span-"+e.id},on:{click:function(a){return t.showSpan(e)}}},[a("td",{style:{paddingLeft:36+20*e.level+"px"}},[a("v-btn",{staticClass:"ml-n9",attrs:{icon:"",disabled:!e.children},on:{click:function(a){return a.stopPropagation(),t.trace.toggleTree(e)}}},[a("v-icon",{attrs:{size:"28"}},[t._v(t._s(t.trace.isExpanded(e)?"mdi-chevron-down":"mdi-chevron-right"))])],1),a("span",{staticClass:"cursor-pointer span-name"},[t._v(t._s(t.truncate(e.name,{length:100})))]),a("SpanChips",{staticClass:"ml-2",attrs:{attrs:e.attrs,"trace-mode":""}})],1),a("td",{staticClass:"text-caption",staticStyle:{position:"relative"}},[a("span",{style:e.labelStyle},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.children&&t.trace.isExpanded(e),expression:"span.children && trace.isExpanded(span)"}]},[a("XDuration",{attrs:{duration:e.durationSelf}}),a("span",{staticClass:"mx-1"},[t._v("of")])],1),a("XDuration",{attrs:{duration:e.duration}})],1),t._l(e.bars,(function(n,r){return a("span",{key:r,staticClass:"span-bar",style:n.coloredStyle,attrs:{title:t.durationFixed(n.duration)+" "+e.name}})})),e.children?a("TraceTimelineChildrenBars",{attrs:{trace:t.trace,span:e,children:e.children,hidden:!t.trace.isExpanded(e)}}):t._e()],2)]):t._e()]}))],2)]),a("v-dialog",{attrs:{"max-width":"1280"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-sheet",[t.trace.activeSpan?a("SpanCard",{key:t.trace.activeSpan.id,attrs:{"date-range":t.dateRange,span:t.trace.activeSpan,fluid:""}}):t._e()],1)],1)],1)},Hi=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("colgroup",[a("col",{staticStyle:{width:"50%"}}),a("col",{staticStyle:{width:"50%"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"px-2"},[t._v("Operation")]),a("th",[t._v("Timeline")])])])}],Ui=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.internalChildren,(function(e){return[t._l(e.bars,(function(n,r){return a("span",{key:e.id+"-"+r,staticClass:"span-bar",style:t.hidden?n.coloredStyle:n.lightenStyle,attrs:{title:t.durationFixed(n.duration)+" "+e.name}})})),e.children?a("TraceTimelineChildrenBars",{key:e.id,attrs:{trace:t.trace,span:t.span,children:e.children,hidden:t.hidden}}):t._e()]}))],2)},Qi=[],Wi=Object(r["defineComponent"])({name:"TraceTimelineChildrenBars",props:{trace:{type:Object,required:!0},span:{type:Object,required:!0},children:{type:Array,required:!0},hidden:{type:Boolean,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){return t.children.filter((function(e){return e.endPct<=t.span.endPct&&"consumer"!==e.kind}))}));return{internalChildren:e,durationFixed:On}}}),zi=Wi,Ki=Object(h["a"])(zi,Ui,Qi,!1,null,null,null),Ji=Ki.exports,Zi=Object(r["defineComponent"])({name:"TraceTimeline",components:{SpanCard:Zs,SpanChips:li,TraceTimelineChildrenBars:Ji},props:{dateRange:{type:Object,required:!0},trace:{type:Object,required:!0}},setup:function(t){var e=Object(r["shallowRef"])(!1);function a(a){e.value=!0,t.trace.activeSpanId=a.id}return{dialog:e,showSpan:a,truncate:u["truncate"],durationFixed:On}}}),Yi=Zi,tu=(a("11f0"),a("a4e0"),Object(h["a"])(Yi,Xi,Hi,!1,null,"2400203e",null)),eu=tu.exports;y()(tu,{VBtn:L["a"],VDialog:fi["a"],VIcon:U["a"],VSheet:rn["a"]});var au=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height grey lighten-5",attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"text-center"},[t.title?a("h1",{staticClass:"text-h1"},[t._v(t._s(t.title))]):t._e(),a("h2",{staticClass:"mt-4 text-h5"},[t._v(t._s(t.message))])])],1)],1)},nu=[],ru=Object(r["defineComponent"])({name:"TraceError",props:{error:{type:Error,required:!0}},setup:function(t){var e=Object(r["computed"])((function(){return t.error})),a=Object(r["computed"])((function(){var t,a,n,r;return null!==(t=null===(a=e.value)||void 0===a||null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.status)&&void 0!==t?t:""})),n=Object(r["computed"])((function(){var a,n,r,o;return null!==(a=null===(n=e.value)||void 0===n||null===(r=n.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)&&void 0!==a?a:String(t.error)}));return{title:a,message:n}}}),ou=ru,su=Object(h["a"])(ou,au,nu,!1,null,"18d9686c",null),iu=su.exports;function uu(t,e){!1!==e(t,null)&&cu(t,e)}function cu(t,e){if(!t.children)return!0;var a,n=Object(i["a"])(t.children);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(!1===e(r,t))return!1;if(!1===cu(r,e))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}function lu(t,e){var a=du(t,e);return a}function du(t,e){var a=[];return uu(t,(function(t,n){t.parent=n,a.push(t),t.level=n?n.level+1:0;var r=t.startPct,o=pu(r,t.duration,e.duration);t.endPct=r+o,t.labelStyle=mu(r,o),t.bars=[];var s=vu(r,o);return t.bars.push({duration:t.durationSelf,style:s,coloredStyle:Object.assign({},s,{backgroundColor:t.color}),lightenStyle:Object.assign({},s,{backgroundColor:t.lightenColor})}),!0})),a}function pu(t,e,a){var n=e/a;return t+n>1?1-t:n}function vu(t,e){var a=fu(t),n=e<=.001?"1px":fu(e);return{left:a,width:n}}function mu(t,e){var a={position:"absolute",bottom:"6px"};if(t<=.5)a.left=fu(t);else{var n=1-(t+e);a.right=fu(n)}return a}function fu(t){return 100*t+"%"}y()(su,{VCol:X["a"],VContainer:H["a"],VRow:W["a"]});var bu=["blue","pink","green","orange","purple","teal"].map((function(t){var e=Wa["a"][t];return{lighten:e.lighten4,base:e.base,darken:e.darken2}}));function hu(t){var e={};uu(t,(function(t,a){if(t._system=t.system,t._system===fa.internalSystem&&a&&(t._system=a._system),!t._system)return!0;var n=e[t._system];n||(n={system:t._system,duration:0,color:void 0},e[t._system]=n);var r=t.durationSelf;return r&&(n.duration+=r),!0}));var a=gu(e),n=bu[bu.length-1];return uu(t,(function(t){var a,r,o=null!==(a=null===(r=e[t._system])||void 0===r?void 0:r.color)&&void 0!==a?a:n;return t.color=o.base,t.lightenColor=o.lighten,t.darkenColor=o.darken,!0})),a}function gu(t){var e=[];for(var a in t)e.push(t[a]);e.sort((function(t,e){return t.duration<e.duration?1:t.duration>e.duration?-1:0}));for(var n=0;n<e.length&&n<bu.length-1;n++){var r=e[n];r.color=bu[n]}return e}function yu(){var t=l(),e=t.route,a=pt(),n=a.forceReloadParams,o=Object(r["ref"])(""),s=Object(r["ref"])([]),u=xu(),c=u.isVisible,d=u.isExpanded,p=u.toggleTree,v=u.showTree,m=At((function(){var t=e.value.params.traceId;return{url:"/api/tracing/traces/".concat(t),params:Object(ot["a"])({},n.value)}})),f=m.loading,b=m.data,h=m.error,g=Object(r["computed"])((function(){return e.value.params.traceId})),y=Object(r["computed"])((function(){var t;return null===(t=b.value)||void 0===t?void 0:t.trace})),x=Object(r["computed"])((function(){var t;return null===(t=b.value)||void 0===t?void 0:t.root})),O=Object(r["computed"])((function(){var t,e=null===(t=b.value)||void 0===t?void 0:t.root;if(!e)return[];var a=lu(e,y.value);return a})),_=Object(r["computed"])((function(){if(o.value)return O.value.find((function(t){return t.id===o.value}))}));return Object(r["watch"])(O,(function(t){if(t.length){var e=t[0];if(e.children){var a,n=Object(i["a"])(e.children);try{for(n.s();!(a=n.n()).done;){var r=a.value;uu(r,(function(t){return p(t),!0}))}}catch(o){n.e(o)}finally{n.f()}}}}),{immediate:!0}),Object(r["watch"])(_,(function(t){t&&v(t)})),Object(r["watch"])(x,(function(t){t&&(s.value=hu(t))}),{flush:"sync"}),Object(r["proxyRefs"])({activeSpanId:o,activeSpan:_,loading:f,error:h,coloredSystems:s,root:x,spans:O,id:g,trace:y,isVisible:c,isExpanded:d,toggleTree:p,showTree:v})}function xu(){var t=Object(r["shallowReactive"])({}),e=Object(r["shallowReactive"])({});function a(e){return e.id in t||Object(r["set"])(t,e.id,0),!t[e.id]}function n(t){return t.id in e||Object(r["set"])(e,t.id,!1),!e[t.id]}function o(t){Object(r["set"])(e,t.id,n(t)),s(t,n(t)?1:-1)}function s(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.children){var n,o=Object(i["a"])(e.children);try{for(o.s();!(n=o.n()).done;){var u,c=n.value;Object(r["set"])(t,c.id,(null!==(u=t[c.id])&&void 0!==u?u:0)+a),s(c,a)}}catch(l){o.e(l)}finally{o.f()}}}function u(t){t=t.parent;while(t)n(t)||o(t),t=t.parent}return{isVisible:a,isExpanded:n,toggleTree:o,showTree:u}}var Ou=Object(r["defineComponent"])({name:"TraceShow",components:{LoadPctileChart:js,SystemBarChart:Gi,TraceTimeline:eu,TraceError:iu},setup:function(){Object(rt["useTitle"])("View trace");var t=Rt(),e=yu(),a=Object(r["computed"])((function(){if(e.root)return Object(ot["a"])(Object(ot["a"])({},t.axiosParams()),{},{system:e.root.system,group_id:e.root.groupId})})),n=Object(r["computed"])((function(){if(e.root)return{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.queryParams()),{},{system:e.root.system,where:"".concat(fa.spanGroupId,' = "').concat(e.root.groupId,'"')})}})),o=Object(r["computed"])((function(){if(e.root)return{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.queryParams()),{},{system:fa.allSystem,query:["group by ".concat(fa.spanGroupId),fa.spanCount,fa.spanErrorCount,"p50(".concat(fa.spanDuration,")"),"p90(".concat(fa.spanDuration,")"),"p99(".concat(fa.spanDuration,")"),"sum(".concat(fa.spanDuration,")"),"where ".concat(fa.spanTraceId,' = "').concat(e.root.traceId,'"')].join(" | "),plot:null})}}));return Object(r["watch"])((function(){return e.root}),(function(e){e&&(Object(rt["useTitle"])(e.name),t.changeWithin(e.time,xt))})),{dateRange:t,trace:e,meta:_u(t,e),axiosParams:a,groupRoute:n,exploreTraceRoute:o}}});function _u(t,e){var a=Object(r["computed"])((function(){var a=e.root,n=[];return a?(a.system&&n.push({text:a.system,to:{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.queryParams()),{},{system:a.system})},exact:!0}),a.system&&a.groupId&&n.push({text:a.name,to:{name:"GroupList",query:Object(ot["a"])(Object(ot["a"])({},t.queryParams()),{},{system:a.system,where:"".concat(fa.spanGroupId,' = "').concat(a.groupId,'"')})},exact:!0}),n.push({text:e.id}),n):n}));return Object(r["proxyRefs"])({breadcrumbs:a})}var ju=Ou,Cu=Object(h["a"])(ju,Di,Li,!1,null,"355bdd64",null),wu=Cu.exports;y()(Cu,{VBreadcrumbs:zs["a"],VBreadcrumbsItem:Ks["a"],VBtn:L["a"],VCard:ce["a"],VCardText:le["b"],VCol:X["a"],VContainer:H["a"],VRow:W["a"],VSheet:rn["a"],VSkeletonLoader:Ar["a"]});var ku=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.span.loading?a("v-progress-linear",{attrs:{absolute:"",indeterminate:""}}):t._e(),t.span.item?a("SpanCard",{attrs:{"date-range":t.dateRange,span:t.span.item,fluid:t.$vuetify.breakpoint.mdAndDown}}):t._e()],1)},Su=[],Vu=Object(r["defineComponent"])({name:"SpanShow",components:{SpanCard:Zs},setup:function(){var t=Rt(),e=qu();return Object(r["watch"])((function(){return e.item}),(function(e){e&&(Object(rt["useTitle"])(e.name),t.changeWithin(e.time,xt))})),{dateRange:t,span:e}}});function qu(){var t=l(),e=t.route,a=At((function(){var t=e.value.params,a=t.traceId,n=t.spanId;return{url:"/api/tracing/traces/".concat(a,"/").concat(n)}})),n=a.loading,o=a.data,s=Object(r["computed"])((function(){var t;return null===(t=o.value)||void 0===t?void 0:t.span}));return Object(r["proxyRefs"])({loading:n,item:s})}var Pu=Vu,Tu=Object(h["a"])(Pu,ku,Su,!1,null,"624a788d",null),Ru=Tu.exports;y()(Tu,{VProgressLinear:Dn["a"]});var Iu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HelpCard")},Eu=[],Du=Object(r["defineComponent"])({name:"Tracing",components:{HelpCard:ma},setup:function(){Object(rt["useTitle"])("Getting started with Uptrace")}}),Lu=Du,Mu=Object(h["a"])(Lu,Iu,Eu,!1,null,"69cf899e",null),Nu=Mu.exports;n["default"].use(et["a"]);var $u=[{name:"Home",path:"/",redirect:{name:"GroupList"}},{name:"Overview",path:"/overview",component:zn},{name:"GroupList",path:"/explore",component:Ei},{name:"TraceShow",path:"/traces/:traceId",component:wu},{name:"SpanShow",path:"/traces/:traceId/:spanId",component:Ru},{name:"Help",path:"/help",component:Nu}],Bu=new et["a"]({mode:"history",base:"/",routes:$u}),Au=Bu,Fu=(a("b20f"),a("a69d"));n["default"].directive("frag",Fu["a"]);var Gu=a("654b");Object(Gu["a"])(Et.a,{retries:2,retryDelay:Gu["a"].exponentialDelay}),Et.a.interceptors.request.use((function(t){return t.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL,t.withCredentials=!0,t}));a("3468"),a("365e"),a("c058"),a("e52c"),a("fdca");var Xu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-toolbar",class:t.color},[t.loading?a("v-progress-linear",{attrs:{absolute:"",indeterminate:""}}):t._e(),a("v-container",{staticClass:"py-0",attrs:{fluid:t.fluid}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pa-0"},[a("v-toolbar",{attrs:{flat:"",color:"transparent",height:"auto"}},[t._t("default")],2)],1)],1)],1)],1)},Hu=[],Uu=Object(r["defineComponent"])({name:"PageToolbar",props:{loading:{type:Boolean,default:!1},fluid:{type:Boolean,default:!1},color:{type:String,default:"light-blue lighten-5"}},setup:function(){return{}}}),Qu=Uu,Wu=(a("87c2"),Object(h["a"])(Qu,Xu,Hu,!1,null,null,null)),zu=Wu.exports;y()(Wu,{VCol:X["a"],VContainer:H["a"],VProgressLinear:Dn["a"],VRow:W["a"],VToolbar:Gn["a"]});var Ku=Object(r["defineComponent"])({name:"XPlaceholder",setup:function(t,e){return function(){return e.slots.placeholder?Ju(e.slots.placeholder()):e.slots.default?Ju(e.slots.default()):void 0}}});function Ju(t){return Array.isArray(t)&&t.length>1?Object(r["h"])("div",t):t}var Zu,Yu,tc,ec,ac=Ku,nc=Object(h["a"])(ac,Zu,Yu,!1,null,null,null),rc=nc.exports,oc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.pager.numPage>1?a("v-row",{attrs:{align:"center",justify:"space-between","no-gutters":""}},[a("v-col",{attrs:{cols:"2"}}),a("v-col",[a("v-pagination",{attrs:{"total-visible":7,length:t.pager.numPage},model:{value:t.pager.page,callback:function(e){t.$set(t.pager,"page",e)},expression:"pager.page"}})],1),a("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[t.pager.numItem?a("XPager",{attrs:{pager:t.pager,"without-prev-next":""}}):t._e()],1)],1):t._e()},sc=[],ic=n["default"].component("XPager",{functional:!0,props:{pager:{type:Object,required:!0},withoutPrevNext:{type:Boolean,default:!1}},render:function(t,e){var a=e.props,n=e.data,r=[t("span",{class:"text-body-2"},"".concat(a.pager.pos.start+1," - ").concat(a.pager.pos.end," of ")+"".concat(a.pager.numItem))];return a.withoutPrevNext||(r.push(t(L["a"],{class:{"ml-2":!0},props:{icon:!0,disabled:!a.pager.hasPrev},on:{click:a.pager.prev}},[t(U["a"],"mdi-chevron-left")])),r.push(t(L["a"],{props:{icon:!0,disabled:!a.pager.hasNext},on:{click:a.pager.next}},[t(U["a"],"mdi-chevron-right")]))),t("span",Object(ot["a"])({},n),r)}}),uc=ic,cc=Object(h["a"])(uc,tc,ec,!1,null,"518cdcf5",null),lc=cc.exports,dc=Object(r["defineComponent"])({name:"XPagination",components:{XPager:lc},props:{pager:{type:Object,required:!0}}}),pc=dc,vc=a("c31e"),mc=Object(h["a"])(pc,oc,sc,!1,null,"68dec63a",null),fc=mc.exports;y()(mc,{VCol:X["a"],VPagination:vc["a"],VRow:W["a"]});var bc,hc,gc=n["default"].component("XNum",{functional:!0,props:{value:{type:void 0,required:!0},name:{type:String,default:""}},render:function(t,e){var a=e.props,n=un(a.name,a.value),r=jn(n);return t("span",r(a.value))}}),yc=gc,xc=Object(h["a"])(yc,bc,hc,!1,null,"6fba924e",null),Oc=xc.exports,_c=a("71bc"),jc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:"my-0 x-code",attrs:{color:"grey lighten-5"}},[a("prism",{attrs:{code:t.code,inline:t.inline,language:t.language}})],1)},Cc=[],wc=a("c45e"),kc=a.n(wc),Sc=Object(r["defineComponent"])({name:"XCode",components:{Prism:kc.a},props:{code:{type:String,required:!0},language:{type:String,default:"markup"},inline:{type:Boolean,default:!1}},setup:function(){return{}}}),Vc=Sc,qc=(a("5a7a"),Object(h["a"])(Vc,jc,Cc,!1,null,null,null)),Pc=qc.exports;y()(qc,{VSheet:rn["a"]});var Tc=n["default"].component("XText",{functional:!0,props:{name:{type:String,default:""},value:{type:void 0,required:!0}},render:function(t,e){var a=e.props,n=e.data;if(Array.isArray(a.value))return t("span",n,a.value.join(", "));switch(Object(_c["a"])(a.value)){case"object":return t(Pc,{props:{code:JSON.stringify(a.value,null,2)}});case"string":var r=Rc(a.value);if("object"===Object(_c["a"])(r))return t(Pc,{props:{code:JSON.stringify(r,null,2)}});break}return Ic(a.value)?t(Pc,{props:{code:a.value}}):t(Oc,{props:{name:a.name,value:a.value}})}});function Rc(t){try{return JSON.parse(t)}catch(e){return}}function Ic(t){return"string"===typeof t&&t.includes("\n")}var Ec,Dc,Lc,Mc,Nc,$c,Bc=Tc,Ac=Object(h["a"])(Bc,Ec,Dc,!1,null,"44e08f33",null),Fc=Ac.exports,Gc=n["default"].component("XDate",{functional:!0,props:{date:{type:[String,Date],required:!0}},render:function(t,e){var a=e.props,n=e.data,r=_t(a.date);return t("span",n,jt(r))}}),Xc=Gc,Hc=Object(h["a"])(Xc,Lc,Mc,!1,null,"5c2cf197",null),Uc=Hc.exports,Qc=n["default"].component("XDuration",{functional:!0,props:{duration:{type:Number,default:void 0}},render:function(t,e){var a=e.props,n=On(a.duration);return t("span",n)}}),Wc=Qc,zc=Object(h["a"])(Wc,Nc,$c,!1,null,"77d6d3b7",null),Kc=zc.exports;n["default"].component("PageToolbar",zu),n["default"].component("XPlaceholder",rc),n["default"].component("XPagination",fc),n["default"].component("XNum",Oc),n["default"].component("XText",Fc),n["default"].component("XDate",Uc),n["default"].component("XDuration",Kc),n["default"].component("XCode",Pc);var Jc=a("85af");n["default"].use(Jc["a"]);var Zc=new Jc["a"]({});n["default"].use(r["default"]),n["default"].config.productionTip=!1,new n["default"]({router:Au,vuetify:Zc,render:function(t){return t(tt)}}).$mount("#app")},d1ab:function(t,e,a){},d36a:function(t,e,a){"use strict";a("d1ab")},d542:function(t,e,a){"use strict";a("4fbb")},e4c5:function(t,e,a){"use strict";a("c867")}});
//# sourceMappingURL=app.64b2e350.js.map